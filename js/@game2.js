/**********************************************************************
 require( 'require' )
 -----------------------------------------------------------------------
 @example

 var Path = require("node://path");  // Only in NodeJS/NW.js environment.
 var Button = require("tfw.button");

 **********************************************************************/

window.require = function() {
    var modules = {};
    var definitions = {};
    var nodejs_require = typeof window.require === 'function' ? window.require : null;

    var f = function(id, body) {
        if( id.substr( 0, 7 ) == 'node://' ) {
            // Calling for a NodeJS module.
            if( !nodejs_require ) {
                throw Error( "[require] NodeJS is not available to load module `" + id + "`!" );
            }
            return nodejs_require( id.substr( 7 ) );
        }

        if( typeof body === 'function' ) {
            definitions[id] = body;
            return;
        }
        var mod;
        body = definitions[id];
        if (typeof body === 'undefined') {
            var err = new Error("Required module is missing: " + id);   
            console.error(err.stack);
            throw err;
        }
        mod = modules[id];
        if (typeof mod === 'undefined') {
            mod = {exports: {}};
            var exports = mod.exports;
            body(f, mod, exports);
            modules[id] = mod.exports;
            mod = mod.exports;
            //console.log("Module initialized: " + id);
        }
        return mod;
    };
    return f;
}();
function addListener(e,l) {
    if (window.addEventListener) {
        window.addEventListener(e,l,false);
    } else {
        window.attachEvent('on' + e, l);
    }
};

addListener(
    'DOMContentLoaded',
    function() {
        document.body.parentNode.$data = {};
        // Attach controllers.
        var W = require('x-widget');
        W('game21', 'game2', {"fullscreen": "true"},{"id":"game21","name":"game2"})

    }
);
require("$",function(r,t,n){n.config={name:'"tolo-fast-sprite"',description:'"Low-level versatile yet powerfull library to paint sprites on WebGL context"',author:'"tolokoban"',version:'"0.0.13"',major:"0",minor:"0",revision:"13",date:"2017-12-28T00:19:00.000Z",consts:{}};var o=null;n.lang=function(r){return void 0===r&&(window.localStorage&&(r=window.localStorage.getItem("Language")),r||(r=window.navigator.language)||(r=window.navigator.browserLanguage)||(r="fr"),r=r.substr(0,2).toLowerCase()),o=r,window.localStorage&&window.localStorage.setItem("Language",r),r},n.intl=function(r,t){var o,e,a,i,l,g,s,u=r[n.lang()],w=t[0];for(s in r)break;if(!s)return w;if(!u&&!(u=r[s]))return w;if(o=u[w],o||(u=r[s],o=u[w]),!o)return w;if(t.length>1){for(e="",l=0,a=0;a<o.length;a++)i=o.charAt(a),"$"===i?(e+=o.substring(l,a),a++,g=o.charCodeAt(a)-48,g<0||g>=t.length?e+="$"+o.charAt(a):e+=t[g],l=a+1):"\\"===i&&(e+=o.substring(l,a),a++,e+=o.charAt(a),l=a+1);e+=o.substr(l),o=e}return o}});
//# sourceMappingURL=$.js.map
require("game2",function(e,s,t){function a(e){var s=this._gl,t=new p(s,this.resolution,e);s.enable(s.BLEND),s.blendFuncSeparate(s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA,s.ZERO,s.ONE),s.blendEquation(s.FUNC_ADD),s.enable(s.DEPTH_TEST),s.depthFunc(s.LEQUAL);var a=function(e){if(requestAnimationFrame(a),!t.pause){if(-1===t.lastTime)return t.baseTime=e,t.lastTime=e,void t.setNextSequence("Init");t.time=e-t.baseTime,t.delta=e-t.lastTime,t.lastTime=e,t.absoluteTime=e,r(s,1),l.loop(t.time,t.delta),t.sequence(t)}};requestAnimationFrame(a)}var n=function(){function s(){return a(t,arguments)}var t={en:{},fr:{}},a=e("$").intl;return s.all=t,s}();e("game2.gfx");var i=e("dom"),o=e("tfw.data-binding"),g=(e("tfw.message").info,e("splash")),r=e("webgl.resize"),p=e("game2.runtime"),l=e("game2.controls"),c=function(e){var s=g({tree:"css/game2.gfx/tree.png",grass:"css/game2.gfx/grass.jpg",ground:"css/game2.gfx/ground.jpg",hero:"css/game2.gfx/hero.png",spot:"css/game2.gfx/spot.png",sword:"css/game2.gfx/sword.png",peopleA:"css/game2.gfx/peopleA.png",peopleB:"css/game2.gfx/peopleB.png",peopleC:"css/game2.gfx/peopleC.png",peopleD:"css/game2.gfx/peopleD.png",house:"css/game2.gfx/house.png",sea1:"css/game2.gfx/sea1.jpg",sea2:"css/game2.gfx/sea2.jpg"}),t=i.elem(this,"canvas");console.info("Creation of context for WebGL 2.0");var n=null;n||(console.warn("Fallback to WebGL 1.0"),n=t.getContext("webgl",{alpha:!1,depth:!0,stencil:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,failIfPerformanceCaveat:!1})),this._gl=n,o.propRemoveClass(this,"visible","hide"),o.prop(this,"width")(function(e){isNaN(parseInt(e))||(e+="px"),i.css(t,{width:e})}),o.prop(this,"height")(function(e){isNaN(parseInt(e))||(e+="px"),i.css(t,{height:e})}),o.propInteger(this,"resolution"),o.propAddClass(this,"fullscreen"),e=o.extend({visible:!0,fullscreen:!1,resolution:1,width:"100%",height:"100%"},e,this);var r=this;s.then(function(e){a.call(r,e)})};s.exports=c,s.exports._=n});
//# sourceMappingURL=game2.js.map
require("game2.controls",function(e,n,t){function a(e){var n=e.key,t=i[n];return t&&e.preventDefault(),t}var r=function(){function n(){return a(t,arguments)}var t={en:{},fr:{}},a=e("$").intl;return n.all=t,n}(),o={NE:0,SE:0,SW:0,NW:0,E:0,W:0,N:0,S:0,JUMP:0},i={9:"NE",6:"E",3:"SE",2:"S",1:"SW",4:"W",7:"NW",5:"JUMP",Enter:"JUMP",Space:"JUMP"," ":"JUMP",ArrowLeft:"W",ArrowUp:"N",ArrowRight:"E",ArrowDown:"S"},u=[];for(var c in o)u.push(c);u.forEach(function(e){Object.defineProperty(n.exports,e,{set:function(){},get:function(){return o[e]||0},enumerable:!0,configurable:!1})}),document.addEventListener("keydown",function(e){var n=a(e);n&&(o[n]=1)}),document.addEventListener("keyup",function(e){var n=a(e);n&&(o[n]=0)}),n.exports.loop=function(e,n){var t=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads():[];if(t){var a=t[0];if(a){var r=a.axes[0],i=a.axes[1];o.NE=o.NW=o.SE=o.SW=o.N=o.S=o.E=o.W=0;var u=Math.abs(r),c=Math.abs(i);u<.001||c<.001||(Math.min(u,c)/Math.max(u,c)>.5?u>c?r>0?o.E=1:o.W=1:i>0?o.N=1:o.S=1:r>0?i>0?o.SE=1:o.NE=1:i>0?o.SW=1:o.NW=1)}}},window.addEventListener("gamepadconnected",function(e){console.info("[controls] e.gamepad=",e.gamepad)}),n.exports._=r});
//# sourceMappingURL=game2.controls.js.map
require("game2.runtime",function(e,t,i){function n(e,t,i){this.levelIndex=0,this.level=null,this.gl=e,this.resolution=t,this.assets=i,this.hero=null,this.monsters=null,this.absoluteTime=0,this.baseTime=0,this.lastTime=-1,this.time=0,this.delta=0,this.sequence=null,this.context={}}var s=function(){function t(){return n(i,arguments)}var i={en:{},fr:{}},n=e("$").intl;return t.all=i,t}(),l={Init:e("game2.sequence.init"),PlayTime:e("game2.sequence.playtime")};n.prototype.setNextSequence=function(e){var t=l[e];if("function"!=typeof t)throw Error("Unknown sequence name: "+e);console.log("Next sequence: ",e),this.sequence=t,this.baseTime=this.absoluteTime,this.deltaTime=0,this.time=0,"function"==typeof t.init&&t.init(this)},t.exports=n,t.exports._=s});
//# sourceMappingURL=game2.runtime.js.map
require("game2.sequence.playtime",function(e,a,t){function n(e){var a=e.gl,t=e.level,n=Math.min(a.canvas.width,a.canvas.height)/700;e.zoom=n;var r=e.x,o=e.z;c.N&&t.canMoveN(r,o)&&(e.z+=v*e.delta),c.S&&t.canMoveS(r,o)&&(e.z-=v*e.delta),c.E&&t.canMoveE(r,o)&&(e.x+=v*e.delta),c.W&&t.canMoveW(r,o)&&(e.x-=v*e.delta),e.paintWorld(e),e.hero.paint(e),t.computeSwordCoord(e),e.sword.paint(e);var i=t.hitTest(r,o);i&&(e.pause=!0,s.show(i.src,e))}var r=function(){function a(){return n(t,arguments)}var t={en:{},fr:{}},n=e("$").intl;return a.all=t,a}(),o=e("game2.hero"),s=e("game2.media"),i=e("game2.sword"),l=e("game2.levels"),c=e("game2.controls"),v=.0017;n.init=function(e){var a=l(0,e.assets);e.level=a,e.paintWorld=a.createPainter(e),e.hero=new o(e.gl,e.assets),e.sword=new i(e.gl,e.assets),e.x=a.heroX,e.y=0,e.z=a.heroZ},a.exports=n,a.exports._=r});
//# sourceMappingURL=game2.sequence.playtime.js.map
require("game2.levels",function(e,t,r){function o(e,t){var r=this;"number"!=typeof e&&(e=0);var o=i(l[e%l.length]);this._level=o;var n=new h(t);this._world=n,this.cols=100,this.rows=14,o.map.forEach(function(e,t){var i,s;for(i=0;i<e.length;i++)if(" "!==(s=e.charAt(i)))if(n.addFloor("grass",i,0,t),r.getValue(i,t-1)<0&&n.addFace("ground",i,0,t),"*"!==s){var l=a(i,.2),h=a(t,.2),u="abcdefghijklmnopqrstuvwxyz".indexOf(s);u>-1?(s=o.dat["+"],o.itm[u]&&(o.itm[u].x=l,o.itm[u].z=h+.5,console.info("[game2.levels] item, level.itm[item]=",u,o.itm[u]))):s=o.dat[e.charAt(i)],s&&n.addObj(s.img,l,0,h,a(s.w,s.var),a(s.h,s.var))}else r.heroX=i+.25,r.heroZ=t+.25},this)}function i(e){return e=n(e)}function n(e){return JSON.parse(JSON.stringify(e))}function a(e,t){return void 0===t&&(t=.2),e*(1-.5*t+Math.random()*t)}var s=function(){function t(){return o(r,arguments)}var r={en:{},fr:{}},o=e("$").intl;return t.all=r,t}(),l=[{map:[" 000     000000                                                                                     ","c00T0    000d00                                                                                     ","00 000        00                                                                                    ","0   00T00000  000                                   000000                                          ","00 000    00H 00D00                            000000    0000                                       "," 000*00  00000000000000000000000000000000    000                                                    ","00Ta0000A0000000000000000000000000000000000000                                                      ","0000T0    00C0000000000000000000000000000                                                           ","0b000B            000000e000000000000                                                               ","   00   0000    0000000H00000000000                                                                 ","   00  000f000   000000000000000                                                                    ","   00000H000    00000000000000H0000                                                                 ","       000g000   000000000000000                                                                    ","         0000000000000                                                                              "],dat:{T:{img:"tree",w:1,h:1.5,var:.4},H:{img:"house",w:1.2,h:.8,var:.2},A:{img:"peopleA",w:.3,h:.5,var:.1},B:{img:"peopleB",w:.3,h:.5,var:.1},C:{img:"peopleC",w:.4,h:.4,var:.1},D:{img:"peopleD",w:.4,h:.4,var:.1},"+":{img:"spot",w:.5,h:.3,var:.1}},itm:[{src:"neige.webm"},{src:"agathe.webm"},{src:"neige.webm"},{src:"neige.webm"},{src:"neige.webm"},{src:"neige.webm"},{src:"neige.webm"},{src:"neige.webm"},{src:"neige.webm"},{src:"neige.webm"}]}],h=e("game2.world");o.prototype.createPainter=function(e){return this._world.createPainter(e)},o.prototype.canMoveN=function(e,t){return 0===this.getValue(e,t)},o.prototype.canMoveW=function(e,t){return 0===this.getValue(e-.5,t)},o.prototype.canMoveS=function(e,t){return 0===this.getValue(e,t-.5)},o.prototype.canMoveE=function(e,t){return 0===this.getValue(e,t)},o.prototype.getValue=function(e,t){var r=Math.floor(e+.5),o=Math.floor(t+.5);return o<0||o>=this.rows||r<0||r>=this.cols?-1:" "===this._level.map[o][r]?-1:0},o.prototype.getFence=function(e,t){return t<0||t>=this.rows||e<0||e>=this.cols?-1:"[]v".indexOf(this._level.map[t][e+1])},o.prototype.transform=function(e,t){var r=this.getValue(e,t);if(r<0)return-1;var o=this._level.tr[r];return this._level.map[t][e]=""+o,0!=r&&0==o?this._level.todo--:0==r&&0!=o&&this._level.todo++,o},o.prototype.hitTest=function(e,t){if(0===this._level.itm.length)return null;var r=this._level.itm[0];return Math.abs(e-r.x)+Math.abs(t-r.z)<.4?(this._level.itm.shift(),r):null},o.prototype.computeSwordCoord=function(e){if(0===this._level.itm.length)e.swordX=999,e.swordY=999,e.swordZ=999;else{var t=this._level.itm[0];e.swordX=t.x+.45,e.swordY=.3,e.swordZ=t.z}},t.exports=function(e,t){return l[e]?new o(e,t):(console.error("Level `"+e+"` doe not exist!"),null)},t.exports._=s});
//# sourceMappingURL=game2.levels.js.map
require("game2.world",function(t,e,r){function i(t,e){var r=t.createTexture();return t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),r}function a(t,e){var r,i,a={},n=0,o=0,T=0,s=e.getContext("2d");for(r in t)i=t[r],i.width+n>u&&(o=T,n=0),a[r]={u0:n/u,v0:(o+i.height)/u,u1:(n+i.width)/u,v1:o/u},s.drawImage(i,n,o),n+=i.width+1,T=Math.max(T,o+i.height+1);return a}var n=function(){function e(){return i(r,arguments)}var r={en:{},fr:{}},i=t("$").intl;return e.all=r,e}(),u=2048,o=t("game2.shaders"),T=t("webgl.program"),s=function(t){this._assets=t,this._attributes=[],this._canvas=document.createElement("canvas"),this._canvas.setAttribute("width",u),this._canvas.setAttribute("height",u),this._map=a(t,this._canvas)};e.exports=s,s.prototype.createPainter=function(t){var e=t.gl,r=i(e,this._canvas),a=new Float32Array(this._attributes),n=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,n),e.bufferData(e.ARRAY_BUFFER,a,e.STATIC_DRAW);var u=new T(e,{vert:o.vert,frag:o.frag});e.bindBuffer(e.ARRAY_BUFFER,n),e.bufferSubData(e.ARRAY_BUFFER,0,a);var s=Math.floor(a.length/5);return function(){t.time;u.use(),u.$uniWidth=e.canvas.width,u.$uniHeight=e.canvas.height,u.$uniX=t.x,u.$uniY=t.y,u.$uniZ=t.z,u.$uniZoom=t.zoom,e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,r),u.$tex=0,u.bindAttribs(n,"attPosition","attUV"),e.drawArrays(e.TRIANGLES,0,s)}},s.prototype.addObj=function(t,e,r,i,a,n){var u=this.getBox(t);e-=.5*a-.5,i+=.5,this.addTri(e,r,i,u.u0,u.v0,e+a,r,i,u.u1,u.v0,e+a,r+n,i,u.u1,u.v1),this.addTri(e,r,i,u.u0,u.v0,e+a,r+n,i,u.u1,u.v1,e,r+n,i,u.u0,u.v1)},s.prototype.addFloor=function(t,e,r,i){var a=this.getBox(t);this.addTri(e,r,i,a.u0,a.v0,e+1,r,i,a.u1,a.v0,e+1,r,i+1,a.u1,a.v1),this.addTri(e,r,i,a.u0,a.v0,e+1,r,i+1,a.u1,a.v1,e,r,i+1,a.u0,a.v1)},s.prototype.addFace=function(t,e,r,i){var a=this.getBox(t);this.addTri(e,r,i,a.u0,a.v0,e+1,r,i,a.u1,a.v0,e+1,r-1,i,a.u1,a.v1),this.addTri(e,r,i,a.u0,a.v0,e+1,r-1,i,a.u1,a.v1,e,r-1,i,a.u0,a.v1)},s.prototype.addSide=function(t,e,r,i){},s.prototype.addTri=function(t,e,r,i,a,n,u,o,T,s,E,v,h,d,_){this._attributes.push(t,e,r,i,a,n,u,o,T,s,E,v,h,d,_)},s.prototype.getBox=function(t){var e=this._map[t];if(!e)throw Error('Unkown image "'+t+'" in '+Object.keys(this._map).join(", "));return e},e.exports._=n});
//# sourceMappingURL=game2.world.js.map
require("webgl.program",function(r,e,t){function n(r,e,t){if("string"!=typeof e.vert)throw Error("[webgl.program] Missing attribute `vert` in argument `codes`!");if("string"!=typeof e.frag)throw Error("[webgl.program] Missing attribute `frag` in argument `codes`!");e=a(e,t),this.gl=r,Object.freeze(this.gl),this._typesNamesLookup=m(r);var n=r.createProgram();r.attachShader(n,h(r,e.vert)),r.attachShader(n,f(r,e.frag)),r.linkProgram(n),this.program=n,Object.freeze(this.program),this.use=function(){r.useProgram(n)},this.use(),o(this,r,n),i(this,r,n)}function o(r,e,t){var n,o,i={},a=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(n=0;n<a;n++)o=e.getActiveAttrib(t,n),o.typeName=r.getTypeName(o.type),o.length=g(e,o),o.location=e.getAttribLocation(t,o.name),console.info("item=",o),i[o.name]=o;r.attribs=i,Object.freeze(r.attribs)}function i(r,e,t){var n,o,i={},a=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(n=0;n<a;n++)o=e.getActiveUniform(t,n),i[o.name]=e.getUniformLocation(t,o.name),Object.defineProperty(r,"$"+o.name,{set:s(e,o,i[o.name],r._typesNamesLookup),get:u(o),enumerable:!0,configurable:!1});r.uniforms=i,Object.freeze(r.uniforms)}function a(r,e){var t,n,o={};for(t in r)n=r[t],o[t]=n.split("\n").map(function(r){if("#include"!=r.trim().substr(0,8))return r;var t=r.indexOf("#include")+8,n=r.substr(t).trim();"'<\"".indexOf(n.charAt(0))>-1&&(n=n.substr(1,n.length-2));var o=e[n];if("string"!=typeof o)throw console.error("Include <"+n+"> not found in ",e),Error("Include not found in shader: "+n);return o}).join("\n");return o}function s(r,e,t,n){var o="_$"+e.name;switch(e.type){case r.BYTE:case r.UNSIGNED_BYTE:case r.SHORT:case r.UNSIGNED_SHORT:case r.INT:case r.UNSIGNED_INT:case r.SAMPLER_2D:return 1==e.size?function(e){r.uniform1i(t,e),this[o]=e}:function(e){r.uniform1iv(t,e),this[o]=e};case r.FLOAT:return 1==e.size?function(e){r.uniform1f(t,e),this[o]=e}:function(e){r.uniform1fv(t,e),this[o]=e};case r.FLOAT_MAT3:if(1==e.size)return function(e){r.uniformMatrix3fv(t,!1,e),this[o]=e};throw Error("[webgl.program.createWriter] Don't know how to deal arrays of FLOAT_MAT3 in uniform `"+e.name+"'!'");case r.FLOAT_MAT4:if(1==e.size)return function(e){r.uniformMatrix4fv(t,!1,e),this[o]=e};throw Error("[webgl.program.createWriter] Don't know how to deal arrays of FLOAT_MAT4 in uniform `"+e.name+"'!'");default:throw Error("[webgl.program.createWriter] Don't know how to deal with uniform `"+e.name+"` of type "+n[e.type]+"!")}}function u(r){var e="_$"+r.name;return function(){return this[e]}}function c(r,e,t){var n=e.createShader(r);return e.shaderSource(n,t),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS)?n:(console.log(t),console.error("An error occurred compiling the shader: "+e.getShaderInfoLog(n)),null)}function f(r,e){return c(r.FRAGMENT_SHADER,r,e)}function h(r,e){return c(r.VERTEX_SHADER,r,e)}function m(r){var e,t,n={};for(e in r)"number"==typeof(t=r[e])&&(n[t]=e);return n}function g(r,e){switch(e.type){case r.FLOAT_VEC4:return 4;case r.FLOAT_VEC3:return 3;case r.FLOAT_VEC2:return 2;case r.FLOAT:return 1;default:throw"[webgl.program:getSize] I don't know the size of the attribute '"+e.name+"' because I don't know the type "+getTypeName(e.type)+"!"}}var l=function(){function e(){return n(t,arguments)}var t={en:{},fr:{}},n=r("$").intl;return e.all=t,e}();n.prototype.getTypeName=function(r){return this._typesNamesLookup[r]};var p=(new Float32Array).BYTES_PER_ELEMENT;n.prototype.bindAttribs=function(r){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,r);var t=Array.prototype.slice.call(arguments,1),n=0;t.forEach(function(r){var e=this.attribs[r];if(!e)throw'Cannot find attribute "'+r+'"!\nIt may be not active because unused in the shader.\nAvailable attributes are: '+Object.keys(this.attribs).map(function(r){return'"'+r+'"'}).join(", ");n+=e.size*e.length*p},this);var o=0;t.forEach(function(r){var t=this.attribs[r];e.enableVertexAttribArray(t.location),e.vertexAttribPointer(t.location,t.size*t.length,e.FLOAT,!1,n,o),o+=t.size*t.length*p},this)},e.exports=n,e.exports._=l});
//# sourceMappingURL=webgl.program.js.map
require("game2.shaders",function(n,t,i){var o=function(){function t(){return o(i,arguments)}var i={en:{},fr:{}},o=n("$").intl;return t.all=i,t}(),r={vert:"precision mediump float;\n\nuniform float uniWidth;\nuniform float uniHeight;\nuniform float uniX;\nuniform float uniY;\nuniform float uniZ;\n\nattribute vec3 attPosition;\nattribute vec2 attUV;\nvarying vec2 varUV;\n\nconst float FACTOR = 0.07;\n\nvoid main() {\n  varUV = attUV;\n  \n  vec3 pos = attPosition - vec3( uniX, uniY, uniZ );\n  float dist = 1.0 / (10.0 - (pos.z * 0.5));\n  float tilt = 0.35;\n  float x = pos.x;\n  float y = pos.y + pos.z * tilt;\n  \n  x *= FACTOR * uniHeight / uniWidth;\n  y *= FACTOR;\n  \n  gl_Position = vec4( x, y, pos.z * 0.01, dist );\n}\n\n\n\n\n",frag:"precision mediump float;\n\nvarying vec2 varUV;\n\n// Textures.\nuniform sampler2D tex;\n\nvoid main() { \n  gl_FragColor = texture2D(tex, varUV);\n  if( gl_FragColor.a <= 1.0 / 255.0 ) discard;\n}\n"};t.exports=r,t.exports._=o});
//# sourceMappingURL=game2.shaders.js.map
require("game2.sword",function(n,t,i){function e(n,t){var i=n.createTexture();return n.bindTexture(n.TEXTURE_2D,i),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,i),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t.sword),i}var r=function(){function t(){return e(i,arguments)}var i={en:{},fr:{}},e=n("$").intl;return t.all=i,t}(),a={vert:"precision mediump float;\n\nuniform float uniWidth;\nuniform float uniHeight;\nuniform float uniX;\nuniform float uniY;\nuniform float uniZ;\nuniform float uniCX;\nuniform float uniCY;\nuniform float uniCZ;\nuniform float uniTime;\n\nattribute vec2 attUV;\nattribute float attAngle;\nvarying vec2 varUV;\n\nconst float FACTOR = 0.07;\nconst float RADIUS = 0.3;\n\nvoid main() {\n  varUV = attUV;\n\n  float ang = attAngle + uniTime * 0.001;\n  float x = RADIUS * cos(ang) + uniCX;\n  float y = uniCY;\n  float z = RADIUS * sin(ang) + uniCZ;\n  \n  vec3 pos = vec3(x, y, z) - vec3( uniX, uniY, uniZ );\n  float dist = 1.0 / (10.0 - (pos.z * 0.5));\n  float tilt = 0.35;\n  x = pos.x;\n  y = pos.y + pos.z * tilt;\n\n  x *= FACTOR * uniHeight / uniWidth;\n  y *= FACTOR;\n\n  gl_Position = vec4( x, y, pos.z * 0.01, dist );\n}\n",frag:"precision mediump float;\n\nvarying vec2 varUV;\n\n// Textures.\nuniform sampler2D tex;\n\nvoid main() { \n  gl_FragColor = texture2D(tex, varUV);\n  if( gl_FragColor.a <= 1.0 / 255.0 ) discard;\n}\n"},u=n("webgl.program"),o=function(n,t){this._texture=e(n,t);var i=.5*Math.PI,r=new Float32Array([0,0,0,1,0,i,0,1,3*i,1,1,2*i]),o=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,o),n.bufferData(n.ARRAY_BUFFER,r,n.STATIC_DRAW),this._buff=o,this._prg=new u(n,{vert:a.vert,frag:a.frag}),n.bindBuffer(n.ARRAY_BUFFER,o),n.bufferSubData(n.ARRAY_BUFFER,0,r)};t.exports=o,o.prototype.paint=function(n){var t=n.gl,i=this._prg;n.time;i.use(),i.$uniWidth=t.canvas.width,i.$uniHeight=t.canvas.height,i.$uniTime=n.time,i.$uniX=n.x,i.$uniY=n.y,i.$uniZ=n.z,i.$uniCX=n.swordX,i.$uniCY=n.swordY,i.$uniCZ=n.swordZ,t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this._texture),i.$tex=0,i.bindAttribs(this._buff,"attUV","attAngle"),t.drawArrays(t.TRIANGLE_STRIP,0,4)},t.exports._=r});
//# sourceMappingURL=game2.sword.js.map
require("game2.media",function(e,n,o){function t(e,n){function o(){c.confirm({title:"Fin de la vidéo",content:"Voulez-vous revoir cette vidéo ?",yes:"Oui",no:"Non",onYes:function(){t.play()},onNo:function(){document.removeEventListener("keyup",i),d.addClass(t,"hide"),window.setTimeout(function(){console.log("C'est fini et on ne veut plus recommencer..."),d.detach(t),delete n.pause},500)}})}var t=d.tag("video","hide",{src:"css/game2.gfx/"+e}),i=function(e){if("Escape"!==e.key)return void console.info("[game2.media] evt.key=",e.key);o()};document.addEventListener("keyup",i),d.add(document.body,t),window.setTimeout(function(){t.play()},500),window.setTimeout(function(){d.removeClass(t,"hide")},1),t.addEventListener("ended",o)}function i(e,n){return e.toLowerCase().substr(e.length-n.length)===n}var u=function(){function n(){return t(o,arguments)}var o={en:{},fr:{}},t=e("$").intl;return n.all=o,n}(),d=e("dom"),c=e("wdg.modal");o.show=function(e,n){console.info("[game2.media] source=",e),i(e,".webm")&&t(e,n)},n.exports._=u});
//# sourceMappingURL=game2.media.js.map
require("wdg.modal",function(t,o,e){function n(t){var o=this,e=c.div();e.addEventListener("scroll",i.bind(this,e));var n=function(){window.setTimeout(function(){i(e)})},r=c.tag("header"),a=c.tag("footer"),d=c.div("cell","thm-ele24","thm-bg0",[r,e,a]);c.elem(this,"div","wdg-modal",[c.div([d])]);s.prop(this,"content")(function(t){c.clear(e),Array.isArray(t)?t.forEach(function(t){c.add(e,t)}):void 0!==t&&null!==t&&c.add(e,t),n()}),s.prop(this,"header")(function(t){c.clear(r),Array.isArray(t)?t.forEach(function(t){c.add(r,t)}):void 0!==t&&null!==t&&c.add(r,t),n()}),s.prop(this,"footer")(function(t){if(void 0===t||null===t||0===t.length)return void c.addClass(a,"hide");c.removeClass(a,"hide"),c.clear(a),Array.isArray(t)?t.forEach(function(t){c.add(a,t)}):c.add(a,t),n()}),s.propString(this,"width")(function(t){c.css(e,{"max-width":t}),n()}),s.propAddClass(this,"fullscreen"),s.propAddClass(this,"padding"),s.propAddClass(this,"scroll"),s.propAddClass(this,"wide"),s.propBoolean(this,"visible")(function(t){t?o.attach():o.detach()}),t=s.extend({visible:!1,header:[],content:[],footer:[],padding:!0,scroll:!0,wide:!1,fullscreen:!1,width:"auto"},t,this)}function i(t,o){console.info("[wdg.modal] evt=",o),t.scrollTop>0?c.addClass(t,"top"):c.removeClass(t,"top"),t.scrollHeight-t.scrollTop>t.clientHeight?c.addClass(t,"bottom"):c.removeClass(t,"bottom"),console.info("[wdg.modal] body.scrollHeight, body.clientHeight=",t.scrollHeight,t.clientHeight)}var r=function(){function o(){return n(e,arguments)}var e={en:{cancel:"Cancel",close:"Got it",confirm:"Confirm",ok:"Accept"},fr:{cancel:"Annuler",close:"J'ai compris",confirm:"Confirmation",ok:"Accepter"}},n=t("$").intl;return o.all=e,o}(),c=t("dom"),s=t("tfw.data-binding"),a=(t("wdg.flex"),t("wdg.button"));n.prototype.refresh=function(){return s.fire(this,"content"),this},n.prototype.attach=function(){var t=this;this._timeoutDetach&&(window.clearTimeout(this._timeoutDetach),delete this._timeoutDetach),document.body.appendChild(this.element),s.set(this,"visible",!0),c.addClass(this,"fadeout"),window.setTimeout(function(){c.removeClass(t,"fadeout")})},n.prototype.detach=function(){var t=this;window.setTimeout(function(){c.addClass(t,"fadeout")}),this._timeoutDetach=window.setTimeout(function(){delete this._timeoutDetach,s.set(t,"visible",!1),c.detach(t.element)},250)},n.confirm=function(t,o,e){"function"==typeof o&&(t={content:t,onYes:o,onNo:e}),void 0===t.title&&(t.title=r("confirm")),void 0===t.yes&&(t.yes=r("ok")),void 0===t.no&&(t.no=r("cancel")),void 0===t.onYes&&(t.onYes=function(){}),void 0===t.onNo&&(t.onNo=function(){}),o=t.onYes,e=t.onNo;var i=new a({text:t.yes,flat:!0}),s=new a({text:t.no,flat:!0});if(Array.isArray(t.content)&&(t.content=c.div(t.content)),"string"==typeof t.content&&"<html>"==t.content.substr(0,6)){var d=t.content.substr(6);t.content=c.div(),t.content.innerHTML=d}var l=new n({header:t.title,footer:[s,i],content:t.content});return l.attach(),s.on(function(){l.detach(),"function"==typeof e&&e()}),i.on(function(){if("function"==typeof o){var t=o();"string"!=typeof t?l.detach():(s.visible=!1,i.waitOn(t))}else l.detach()}),l},n.alert=function(t,o){var e=new a({text:r("close"),flat:!0});if("string"==typeof t&&"<html>"==t.substr(0,6)){var i=t.substr(6);t=c.div(),t.innerHTML=i}var s=new n({footer:e,content:t});return s.attach(),e.on(function(){s.detach(),"function"==typeof o&&o()}),s},o.exports=n,o.exports._=r});
//# sourceMappingURL=wdg.modal.js.map
require("wdg.button",function(t,e,i){function n(t,e){return void 0===e&&(e={}),new c(r.extend(t,e))}function s(t){if(this.element.className="wdg-button",this.visible||a.addClass(this,"hide"),this.flat)switch(a.addClass(this,"flat"),this.type){case"primary":case"undef":a.addClass(this,"thm-fgP");break;case"secondary":a.addClass(this,"thm-fgS")}else switch(a.addClass(this,"thm-ele2"),this.type){case"primary":a.addClass(this,"thm-bgP");break;case"secondary":a.addClass(this,"thm-bgS");break;default:a.addClass(this,"thm-bg3")}(this.text||"").trim().length>0?(t.text.textContent=this.text,a.removeClass(this,"no-text")):a.addClass(this,"no-text"),this.wait?(t.icon.visible=!0,t.icon.content="wait",t.icon.rotate=!0):!this.icon||"string"==typeof this.icon&&0===this.icon.trim().length?(t.icon.visible=!1,a.removeClass(this,"responsive")):(t.icon.visible=!0,t.icon.content=this.icon,t.icon.rotate=this.anim,this.responsive&&a.addClass(this,"responsive")),this.enabled&&!this.wait||a.addClass(this,"disabled"),this.wide&&a.addClass(this,"wide"),this.inverted||a.addClass(this,"iconToLeft")}var o=function(){function e(){return n(i,arguments)}var i={en:{cancel:"Cancel",close:"Close",delete:"Delete",edit:"Edit",gotit:"Got it",no:"No",ok:"OK",save:"Save",yes:"Yes"},fr:{cancel:"Annuler",close:"Fermer",delete:"Supprimer",edit:"Editer",gotit:"J'ai compris",no:"Non",ok:"Valider",save:"Sauver",yes:"Oui"}},n=t("$").intl;return e.all=i,e}();t("font.roboto");var a=t("dom"),r=t("tfw.data-binding"),l=t("wdg.icon"),d=t("tfw.touchable"),h=["undef","default","standard","primary","secondary"],c=function(t){var e=this,i=new l({size:"24px"}),n=a.div("text"),o=a.elem(this,"button","wdg-button",[i,n]),c=s.bind(this,{icon:i,text:n});r.prop(this,"value"),r.propEnum(h)(this,"type"),r.prop(this,"icon"),r.propBoolean(this,"responsive"),r.propBoolean(this,"anim"),r.propBoolean(this,"wait"),r.propString(this,"text");var p=new d(o,{classToAdd:"thm-ele8"});r.propBoolean(this,"enabled")(function(t){p.enabled=t,c()}),r.propBoolean(this,"inverted"),r.propBoolean(this,"flat"),r.prop(this,"action",0),r.propBoolean(this,"wide"),r.propBoolean(this,"visible"),t=r.extend({inverted:!1,type:"undef",text:"",href:null,target:null,value:"action",action:0,responsive:!1,anim:!1,flat:!1,small:!1,enabled:!0,wait:!1,icon:null,wide:!1,visible:!0},t,this,c),a.on(this.element,{keydown:function(t){13!=t.keyCode&&32!=t.keyCode||(t.preventDefault(),t.stopPropagation(),e.fire())}}),p.tap.add(e.fire.bind(e))};c.prototype.on=function(t){return r.bind(this,"action",t),this},c.prototype.fire=function(){if(this.enabled){var t=this.href;"string"!=typeof t||0===t.trim().length?r.fire(this,"action",this.value):"string"==typeof this.target&&this.target.trim().length>0?window.open(t,this.target):window.location=t}},c.Cancel=function(t){return n({text:o("cancel"),flat:!0},t)},c.Close=function(t){return n({text:o("close"),flat:!0},t)},c.GotIt=function(t){return n({text:o("gotit"),flat:!0},t)},c.Delete=function(t){return n({text:o("delete"),type:"secondary",icon:"delete"},t)},c.No=function(t){return n({text:o("no"),flat:!0},t)},c.Ok=function(t){return n({text:o("ok"),flat:!0},t)},c.Edit=function(t){return n({text:o("edit"),type:"primary",icon:"edit"},t)},c.Save=function(t){return n({text:o("save"),type:"primary",icon:"save"},t)},c.Yes=function(t){return n({text:o("yes"),flat:!0},t)},c.default={caption:"OK",type:null},e.exports=c,e.exports._=o});
//# sourceMappingURL=wdg.button.js.map
require("tfw.touchable",function(t,e,a){var i=function(){function e(){return i(a,arguments)}var a={en:{},fr:{}},i=t("$").intl;return e.all=a,e}(),o=t("dom"),n=t("dom.fx"),s=t("tfw.listeners"),r=function(t,e){var a=this;void 0===e&&(e={}),void 0===e.enabled&&(e.enabled=!0),t=o(t),this.enabled=e.enabled,this.color=e.color||"#fd8",this.classToAdd=e.classToAdd,this.opacity=e.opacity||.4,this.element=o(t),this.tap=new s,this.press=new s,o.addClass(t,"tfw-touchable");var i,r,c=o.div("tfw-touchable-shadow"),l=n().css(c,{transition:"none",transform:"scale(0)"}).exec(function(e){var n=a.classToAdd;"string"==typeof n&&o.addClass(t,n),-1==["relative","absolute","fixed"].indexOf(getComputedStyle(t).position)&&(t.style.position="relative"),t.style.overflow="hidden";var s=t.getBoundingClientRect(),l=s.width,d=s.height;l=Math.max(i,l-i),d=Math.max(r,d-r);var f=Math.ceil(Math.sqrt(l*l+d*d));o.css(c,{left:i+"px",top:r+"px",margin:"-"+f+"px",width:2*f+"px",height:2*f+"px",opacity:0,background:a.color,transform:"scale(0)",transition:"all .15s ease","transition-timing-function":"cubic-bezier(0,1,0.780,1)","-moz-transition-timing-function":"cubic-bezier(0,1,0.780,1)","-webkit-transition-timing-function":"cubic-bezier(0,1,0.780,1)"}),o.add(t,c)}).wait(10).css(c,{opacity:a.opacity,transform:"scale(.25)"}).wait(150).css(c,{transform:"scale(.2)"}).wait(150).css(c,{transition:"all .6s ease",transform:"scale(1)",opacity:0}).wait(600).detach(c).exec(function(){var e=a.classToAdd;"string"==typeof e&&o.removeClass(t,e)}),d=0;o.on(t,{down:function(t){a.enabled&&(t.stopPropagation(),t.preventDefault(),i=Math.floor(t.x),r=Math.floor(t.y),l.start(),d=Date.now())},tap:function(t){a.enabled&&(console.log("TAP",t),a.tap.fire(t))}})};e.exports=r,e.exports._=i});
//# sourceMappingURL=tfw.touchable.js.map
require("tfw.listeners",function(t,i,r){var n=function(){function i(){return n(r,arguments)}var r={en:{}},n=t("$").intl;return i.all=r,i}(),e=function(){this._list=[]};e.prototype.add=function(t,i){if("function"!=typeof t)return!1;this.remove(t);for(var r=0;r<this._list.length;r++)if(t===this._list[r])return!1;return this._list.push([t,i]),!0},e.prototype.remove=function(t,i){if("function"!=typeof t)return!1;for(var r=0;r<this._list.length;r++){var n=this._list[r];if(t===n[0]&&i===n[1])return this._list.splice(r,1),!0}return!1},e.prototype.clear=function(){this._list=[]},e.prototype.fire=function(){var t,i,r,n,e=[].slice.call(arguments);for(t=0;t<this._list.length;t++)if(n=this._list[t],i=n[0],r=n[1],!1===i.apply(r,e))return!1;return!0},i.exports=e,i.exports._=n});
//# sourceMappingURL=tfw.listeners.js.map
require("dom.fx",function(t,e,n){function i(t){if(t==this._session){if(this._index>=this._tasks.length)return this._index=0,this._started=!1,delete this._session,void this._onEnd(this);var e=this,n=this._tasks[this._index++];this._debug&&console.info("[dom.fx] tsk["+(this._index-1)+"]: ",n.label,"("+(Date.now()-this._startTime)+" ms)",n.args,t),n(function(){l(i.bind(e,t))},!0)}}function o(t,e){e.terminate&&e.terminate();var n=t.getBoundingClientRect();console.info("[dom.fx] rect=...",n);var i=c.div();c.css(i,{display:"inline-block",width:n.width+"px",height:n.height+"px"}),e.onBeforeReplace(t),c.replace(i,t),e.onAfterReplace(t),e.substitute=i,e.styles=r(t),e.overlay=c.div("dom-fx-fullscreen"),document.body.appendChild(e.overlay),e.overlay.appendChild(t),c.css(t,{left:n.left+"px",top:n.top+"px",width:n.width+"px",height:n.height+"px"}),c.addClass(t,"dom-fx-fullscreen-target"),l(function(){var n=e.overlay.getBoundingClientRect();c.css(t,{left:"20px",top:"20px",width:n.width-40+"px",height:n.height-40+"px"})})}function s(t,e){var n=e.substitute.getBoundingClientRect();c.css(t,{left:n.left+"px",top:n.top+"px",width:n.width+"px",height:n.height+"px"}),e.terminate=function(){c.detach(e.overlay),e.onBeforeReplace(t),c.replace(t,e.substitute),e.onAfterReplace(t),a(t,e.styles),delete e.terminate},l(e.terminate,200)}function r(t){var e,n,i={};for(e in t.style)n=t.style[e],i[e]=n;return console.info("[dom.fx] styles=...",i),i}function a(t,e){for(var n in e)t.style[n]=e[n]}var d=function(){function e(){return i(n,arguments)}var n={en:{}},i=t("$").intl;return e.all=n,e}();t("polyfill.promise");var c=t("dom"),h=t("tfw.data-binding"),l=window.setTimeout,f=function(){},p=1,u=function(t){this._session={},Object.defineProperty(u.prototype,"name",{value:t,writable:!1,configurable:!0,enumerable:!0}),this._name=t,this._tasks=[],this._index=0,this._started=!1,this._startTime=0,this._onEnd=f};u.prototype.start=function(t){this._started&&this.end(),"function"!=typeof t&&(t=f),this._onEnd=t,this._started=!0,this._index=0,this._session={$id:p++},this._startTime=Date.now(),i.call(this,this._session)},u.prototype.end=function(){if(!this._started)return this;var t=this;for(this._started=!1,delete this._session;this._index<this._tasks.length;){var e=this._tasks[this._index++];t._debug&&console.info("[dom.fx.end] tsk["+(this._index-1)+"]: ",e.label,e.args),e(f,!1)}return this._onEnd(this),this},u.prototype.debug=function(t){return this.addTask(function(e){this._debug=!!t,e()}),this},u.prototype.addTask=function(t,e,n){return t.label=e,t.args=n,this._tasks.push(t),this},u.prototype.log=function(t){return this.addTask(function(e){console.log("[dom.fx]",t),e()},"log"),this},u.prototype.pause=function(){return this.addTask(f,"pause"),this},u.prototype.exec=function(){var t=Array.prototype.slice.call(arguments);return this.addTask(function(e,n){t.forEach(function(t){try{"function"==typeof t?t(n):console.log("[dom.fx]",t)}catch(t){console.error(t)}}),e()},"exec",t),this},["css","addClass","removeClass","toggleClass","detach","saveStyle","restoreStyle","add","removeAtt","replace"].forEach(function(t){var e=c[t];u.prototype[t]=function(){var n=Array.prototype.slice.call(arguments);return this.addTask(function(t){e.apply(c,n),t()},t,n),this}}),u.prototype.vanish=function(t,e){return e=parseInt(e),isNaN(e)&&(e=300),this.css(t,{transition:"none"}).css(t,{transition:"opacity "+e+"ms",opacity:0}).wait(e)},u.prototype.vanishAndDetach=function(t,e){return e=parseInt(e),isNaN(e)&&(e=300),this.vanish(t,e).detach(t)},u.prototype.wait=function(t){var e=Array.prototype.slice.call(arguments);return void 0===t&&(t=0),"number"==typeof t?this.addTask(function(e,n){n&&l(e,t)},"wait",e):this.addTask(function(e,n){if(n){var i=c(t),o=function(t){["transitionend","oTransitionEnd","webkitTransitionEnd"].forEach(function(t){i.removeEventListener(t,o)}),e()};["transitionend","oTransitionEnd","webkitTransitionEnd"].forEach(function(t){i.addEventListener(t,o)})}},"wait",e),this},e.exports=function(t){return new u(t)},e.exports.Fullscreen=function(t){if(void 0===t)throw Error("[dom.fx:fullscreen] Missing argument!");if(void 0===t.target)throw Error("[dom.fx:fullscreen] Missing `opts.target`!");"function"==typeof t.target.element&&(t.target=t.target.element()),void 0!==t.target.element&&(t.target=t.target.element);var e=function(){},n={onBeforeReplace:"function"==typeof t.onBeforeReplace?t.onBeforeReplace:e,onAfterReplace:"function"==typeof t.onAfterReplace?t.onAfterReplace:e};h.propBoolean(this,"value")(function(e){e?o(t.target,n):s(t.target,n)})},e.exports._=d});
//# sourceMappingURL=dom.fx.js.map
require("tfw.data-binding",function(n,t,e){function r(n,t,r,o){var i="function"==typeof o;void 0===t[c]&&(t[c]={}),t[c][r]={value:o,event:new l};var u;u="function"==typeof n?function(e){e=n(e),(i||t[c][r].value!==e)&&(t[c][r].value=e,t[c][r].event.fire(e,t,r))}:function(n){(i||t[c][r].value!==n)&&(t[c][r].value=n,t[c][r].event.fire(n,t,r))};var a=o;return i||(a=function(){return t[c][r].value}),Object.defineProperty(t,r,{get:a,set:u,configurable:!1,enumerable:!0}),e.bind.bind(e,t,r)}function o(n){return n.toLowerCase()}function i(n){return n.trim()}var u=function(){function t(){return r(e,arguments)}var e={en:{}},r=n("$").intl;return t.all=e,t}();n("polyfill.string");var a=n("dom"),f=n("tfw.css").parseUnit,l=n("tfw.listeners"),c="_tfw.data-binding_",s={castFunction:function(n){return"function"!=typeof n?null:n},castArray:function(n){return Array.isArray(n)?n:null===n||void 0===n?[]:[n]},castBoolean:function(n){return"boolean"==typeof n?n:"string"==typeof n?"0"!=(n=n.trim().toLowerCase())&&"false"!=n&&"no"!=n&&"null"!=n&&"undefined"!=n:"number"==typeof n?0!==n:null},castColor:function(n){return""+n},castDate:function(n){return"number"==typeof n||"string"==typeof n?new Date(n):n instanceof Date?n:new Date},castEnum:function(n){var t=n.map(o);return function(e){if("number"==typeof e)return n[Math.floor(e)%n.length];if("string"!=typeof e)return n[0];var r=t.indexOf(e.trim().toLowerCase());return r<0&&(r=0),n[r]}},castInteger:function(n){return"number"==typeof n?Math.floor(n):"boolean"==typeof n?n?1:0:"string"==typeof n?parseInt(n):Number.NaN},castFloat:function(n){return"number"==typeof n?n:"boolean"==typeof n?n?1:0:"string"==typeof n?parseFloat(n):Number.NaN},castRegexp:function(n){if(n instanceof RegExp)return n;if("string"==typeof n&&0!=n.trim().length)try{return new RegExp(n)}catch(t){console.error("[castRegexp] /"+n+"/ ",t)}return null},castString:function(n){return"string"==typeof n?n:void 0===n||null===n?"":JSON.stringify(n)},castStringArray:function(n){return Array.isArray(n)?n:null===n||void 0===n?[]:"string"==typeof n?n.split(",").map(i):[JSON.stringify(n)]},castUnit:function(n){return n?void 0!==n.v?(n.v=parseFloat(n.v),isNaN(n.v)?{v:0,u:"px"}:("string"!=typeof n.u?n.u="px":n.u=n.u.trim().toLowerCase(),""===n.u&&(n.u="px"),{v:n.v,u:n.u})):"number"==typeof n?{v:n,u:"px"}:"string"!=typeof n?{v:0,u:"px"}:f(""+n):{v:0,u:"px"}},castValidator:function(n){if("function"==typeof n)return n;if("boolean"==typeof n)return function(){return n};if("string"==typeof n&&0!=n.trim().length)try{var t=new RegExp(n);return t.test.bind(t)}catch(t){console.error("[castValidator] /"+n+"/ ",t)}return function(){return null}}};e.fire=function(n,t,e){var r=n[t];void 0===e&&(e=r),n[c][t].value=e,n[c][t].event.fire(n[t],n,t)},e.set=function(n,t,e){void 0===n[c]&&(n[c]={}),void 0===n[c][t]&&(n[c][t]={}),n[c][t].value=e},e.get=function(n,t){if(void 0!==n[c]&&void 0!==n[c][t])return n[c][t].value},e.readOnly=function(n,t,e){"function"==typeof e?Object.defineProperty(n,t,{get:e,set:function(){},configurable:!1,enumerable:!0}):Object.defineProperty(n,t,{value:e,writtable:!1,configurable:!1,enumerable:!0})},e.prop=r.bind(null,null),e.propWidget=function(n,t,r,o){return void 0===o&&(o=t),void 0===n[c]&&(n[c]={}),n[c][t]={event:new l},e.bind(r,o,function(e){n[c][t].event.fire(e,n,t)}),Object.defineProperty(n,t,{get:function(){return r[o]},set:function(n){r[o]=n},configurable:!1,enumerable:!0}),e.bind.bind(e,n,t)},e.propToggleClass=function(n,t,e,o){"string"!=typeof o&&(o="");var i={};return"string"==typeof e?i[e]=e:Array.isArray(e)?e.forEach(function(n){i[n]=n}):i=e,r(null,n,t)(function(t){var e,r;for(e in i)r=i[e],e==t?a.addClass(n.element,o+r):a.removeClass(n.element,o+r)})},e.propAddClass=function(n,t,e){return void 0===e&&(e=t),r(s.castBoolean,n,t)(function(t){t?a.addClass(n.element,e):a.removeClass(n.element,e)})},e.propRemoveClass=function(n,t,e){return void 0===e&&(e=t),r(s.castBoolean,n,t)(function(t){t?a.removeClass(n.element,e):a.addClass(n.element,e)})},e.propArray=r.bind(null,s.castArray),e.propBoolean=r.bind(null,s.castBoolean),e.propColor=r.bind(null,s.castColor),e.propDate=r.bind(null,s.castDate),e.propEnum=function(n){return r.bind(null,s.castEnum(n))},e.propFunction=r.bind(null,s.castFunction),e.propInteger=r.bind(null,s.castInteger),e.propFloat=r.bind(null,s.castFloat),e.propRegexp=r.bind(null,s.castRegexp),e.propString=r.bind(null,s.castString),e.propStringArray=r.bind(null,s.castStringArray),e.propUnit=r.bind(null,s.castUnit),e.propValidator=r.bind(null,s.castValidator),e.bind=function(n,t,e,r,o){if(void 0===n[c]||void 0===n[c][t])throw console.error(JSON.stringify(t)+" is not a bindable property!",{srcObj:n,srcAtt:t,dstObj:e,dstAtt:r,options:o}),Error(JSON.stringify(t)+" is not a bindable property!");void 0===o&&(o={}),o.value&&(o.converter=function(){return o.value});var i="function"==typeof e?e:function(n,t,i){e[r]="function"==typeof o.converter?o.converter(n):n};return n[c][t].event.add(i),o},e.extend=function(n,t,r,o){var i,u,a=JSON.parse(JSON.stringify(n));for(i in t)"$"!=i.charAt(0)&&(u=t[i],void 0===a[i]?console.error("[tfw.data-binding.extend] Undefined argument: `"+i+"`!"):a[i]=u);if(void 0!==r){for(i in t)"$"==i.charAt(0)&&Object.defineProperty(r,i,{value:t[i],writable:!1,configurable:!1,enumerable:!1});for(i in a)"$"!=i.charAt(0)&&(r[i]=a[i]);if("function"==typeof o){for(i in r[c])e.bind(r,i,o);o()}}return a},e.converters=s,t.exports._=u});
//# sourceMappingURL=tfw.data-binding.js.map
require("tfw.css",function(e,r,t){var i=function(){function r(){return i(t,arguments)}var t={en:{}},i=e("$").intl;return r.all=t,r}();t.parseUnit=function(e){for(var r,t=0,i=0;i<e.length;i++)if(r=e.charAt(i),0===t){if("-"==r||"+"==r||r>="0"&&r<="9")t=1;else if("."==r)t=2;else if(r>" ")break}else if(1==t){if("."==r)t=2;else if(r<"0"||r>"9")break}else if(2==t&&(r<"0"||r>"9"))break;var n={v:parseFloat(e.substr(0,i)),u:e.substr(i).trim().toLowerCase()};return""===n.u&&(n.u="px"),n},r.exports._=i});
//# sourceMappingURL=tfw.css.js.map
require("dom",function(e,t,r){function n(e,t,r){return Object.defineProperty(e,"element",{value:t,writable:!1,configurable:!1,enumerable:!0}),r?e:(e.on=f.bind(e,t),e.css=i.bind(e,t),e.add=l.bind(e,t),e.att=s.bind(e,t),e.addClass=d.bind(e,t),e.hasClass=v.bind(e,t),e.removeClass=m.bind(e,t),e.toggleClass=y.bind(e,t),e)}function o(e,t){return e=L(e),t=L(t),t.parentNode.replaceChild(e,t),e}function i(e,t){e=L(e);var r,n;for(r in t)n=t[r],e.style[r]=n;return e}function s(e,t,r){e=L(e);var n,o;"string"==typeof t&&(void 0===r&&(r=""),n=t,t={},t[n]=r);for(n in t)o=t[n],e.setAttribute(n,o);return e}function a(e,t){return e=L(e),e.removeAttribute(t),e}function l(e){e=L(e);try{var t,r;for(t=1;t<arguments.length;t++){if("string"==typeof(r=arguments[t])||"number"==typeof r)if(r=""+r,"<html>"==r.substr(0,6).toLowerCase()){var n=r.substr(6);r=L.tag("span"),r.innerHTML=n}else if(S.test(r)){var o=r;r=L.tag("span"),r.innerHTML=o}else r=document.createTextNode(r);else r=L(r);e.appendChild(r)}return e}catch(e){throw console.error("[DOM.add] arguments=",[].slice.call(arguments)),Error("[DOM.add] "+e)}}function c(e){if(Array.isArray(e))return e.forEach(function(e){c(e)}),e;if(void 0===e[N])return e;var t=e[N].events;if(void 0===t)return e;t.off(),delete e[N].events}function f(e,t,r){if("function"==typeof t||null===t)t={tap:t};else if("string"==typeof t&&"function"==typeof r){var n={};n[t]=r,t=n}if(Array.isArray(e))return e.forEach(function(e){f(e,t)}),e;e=L(e),void 0===e[N]&&(e[N]={}),void 0===e[N].events&&(e[N].events=new x(e));var o,i,s;for(o in t)i=t[o],"!"==o.charAt(0)?(o=o.substr(1),s=!0):s=!1,"keydown"==o||"keyup"==o?e.addEventListener(o,i,s):e[N].events.on(o,i,s);return e}function u(e,t){try{var r,n,o,i,s=document.createElementNS(e,t.trim().toLowerCase());for(r=2;r<arguments.length;r++)if(n=arguments[r],Array.isArray(n))n.forEach(function(e){switch(typeof e){case"string":case"number":case"boolean":if(e=""+e,"<html>"==e.substr(0,6)){var t=e.substr(6);e=L.tag("span"),e.innerHTML=t}else e=document.createTextNode(e)}l(s,e)});else switch(typeof n){case"string":n.split(" ").forEach(function(e){e.length>0&&d(s,e)});break;case"object":for(o in n)i=n[o],s.setAttribute(o,i);break;default:throw Error("[dom.tag] Error creating <"+t+">: Invalid argument #"+r+"!")}return s}catch(r){console.error("[dom.tagNS] Error with `ns` = ",e," and `name` = ",t),console.error(r)}}function d(e){var t=[].slice.call(arguments,1);return Array.isArray(e)?(t.unshift(null),e.forEach(function(e){t[0]=e,d.apply(void 0,t)}),e):(e=L(e),t.forEach(function(t){if("string"==typeof t&&(t=t.trim(),0!=t.length))try{e.classList&&e.classList.add(t)}catch(e){console.error("[dom.addClass] Invalid class name: ",t),console.error(e)}}),e)}function v(e,t){return e=L(e),!!e.classList&&e.classList.contains(t)}function m(e){var t=[].slice.call(arguments,1);return Array.isArray(e)?(t.unshift(null),e.forEach(function(e){t[0]=e,m.apply(void 0,t)}),e):(e=L(e),t.forEach(function(t){if("string"==typeof t)try{e.classList&&e.classList.remove(t)}catch(e){console.error("[dom.removeClass] Invalid class name: ",t),console.error(e)}}),e)}function y(e){return[].slice.call(arguments,1).forEach(function(t){v(e,t)?m(e,t):d(e,t)}),e}function h(e){e=L(e);for(var t=e;t.firstChild;)t.removeChild(t.firstChild);var r=[].slice.call(arguments);return r.length>1&&l.apply(this,r),e}function p(e,t){return e=L(e),void 0===t&&(t=e,e=window.document),e.querySelector(t)}function g(e){e=L(e);var t=e.parentElement;return t?(t.removeChild(e),t):t}function w(e){var t=[].slice.call(arguments);t.shift(),0==t.length&&(t=["div"]),t.push("dom","custom");var r;return void 0!==t[0].element?(r=t[0].element,d(r,"dom","custom")):"function"==typeof t[0].appendChild?(r=t[0],d(r,"dom","custom")):r=L.tag.apply(L,t),Object.defineProperty(e,"element",{value:r,writable:!1,configurable:!1,enumerable:!0}),r}function b(e,t){return void 0===t&&(t=""),null===t&&(t=""),"string"!=typeof t&&(t=JSON.stringify(t)),"<html>"==t.substr(0,6)?e.innerHTML=t.substr(6):e.textContent=t,e}function A(e){if(!Array.isArray(e))return A(Array.prototype.slice.call(arguments));e.forEach(function(e){e=L(e),void 0===e[N]&&(e[N]={}),Array.isArray(e[N].style)||(e[N].style=[]),e[N].style.push(JSON.stringify(e.style))})}function E(e){if(!Array.isArray(e))return E(Array.prototype.slice.call(arguments));e.forEach(function(e){if(e=L(e),void 0===e[N]||!Array.isArray(e[N].style))throw Error("[dom.restoreStyle] `saveStyle()` has never been used on this element!");if(0==e[N].style.length)throw Error("[dom.restoreStyle] more `restore` than `save`!");var t,r,n=JSON.parse(e[N].style.pop());for(t in n)void 0!==(r=n[t])&&(e.style[t]=r)})}var C=function(){function t(){return n(r,arguments)}var r={en:{}},n=e("$").intl;return t.all=r,t}();e("polyfill.classList");var x=e("tfw.pointer-events"),L=function(e){if(e instanceof Node)return e;if(void 0===e||null===e)throw Error("`dom` is not a valid element!",e);if(e.$ instanceof Node)return e.$;if(e.element instanceof Node)return e.element;if("string"==typeof e){var t=document.getElementById(e);return t||console.error("[dom] There is no DOM element with this ID: `"+e+"`"),t}return"function"==typeof e.element?e.element():e};t.exports=L;var N="@dom"+Date.now(),S=/^&(#[0-9]+|[a-zA-Z0-9]+);$/;L.tagNS=u,L.svgRoot=u.bind(void 0,"http://www.w3.org/2000/svg","svg",{version:"1.1","xmlns:svg":"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}),L.svg=u.bind(void 0,"http://www.w3.org/2000/svg"),L.tag=u.bind(void 0,"http://www.w3.org/1999/xhtml"),L.div=u.bind(void 0,"http://www.w3.org/1999/xhtml","div"),L.txt=window.document.createTextNode.bind(window.document),L.textOrHtml=b,L.get=p,L.elem=w,L.css=i,L.att=s,L.removeAtt=a,L.addClass=d,L.hasClass=v,L.removeClass=m,L.toggleClass=y,L.saveStyle=A,L.restoreStyle=E,L.replace=o,L.detach=g,L.on=f,L.off=c,L.add=l,L.wrap=n,L.clear=h,t.exports._=C});
//# sourceMappingURL=dom.js.map
require("tfw.pointer-events",function(t,e,o){function n(t){var e=this;this._slots={},this._eventListeners=[],Object.defineProperty(n.prototype,"element",{value:t,writable:!1,configurable:!0,enumerable:!0}),a.call(e,t,"touchstart",function(o){o.preventDefault(),i.touchDevice||(i.touchDevice=!0,document.body.removeEventListener("mousedown",p,!0),document.body.removeEventListener("mousemove",l,!0),document.body.removeEventListener("mouseup",u,!0));var n=e._slots;1==o.touches.length&&(i.rect=t.getBoundingClientRect(),i.bodyMoveX=o.touches[0].clientX,i.bodyMoveY=o.touches[0].clientY,i.bodyDownX=o.touches[0].clientX,i.bodyDownY=o.touches[0].clientY,i.targetX=o.touches[0].clientX-i.rect.left,i.targetY=o.touches[0].clientY-i.rect.top,i.time=Date.now(),n.down&&n.down({action:"down",button:i.bodyButton,target:t,x:i.targetX,y:i.targetY,stopPropagation:o.stopPropagation.bind(o),preventDefault:o.preventDefault.bind(o)}))}),a.call(e,t,"touchmove",function(o){o.preventDefault();var n=i.bodyMoveX,a=i.bodyMoveY;i.bodyMoveX=o.touches[0].clientX,i.bodyMoveY=o.touches[0].clientY;var r=e._slots;r.drag&&r.drag({action:"drag",target:t,x0:i.targetX,y0:i.targetY,x:i.bodyMoveX-i.rect.left,y:i.bodyMoveY-i.rect.top,dx:i.bodyMoveX-i.bodyDownX,dy:i.bodyMoveY-i.bodyDownY,vx:i.bodyMoveX-n,vy:i.bodyMoveY-a,stopPropagation:o.stopPropagation.bind(o),preventDefault:o.preventDefault.bind(o)})}),a.call(e,t,"touchend",function(t){t.preventDefault();var o=e._slots,n=i.bodyMoveX-i.bodyDownX,a=i.bodyMoveY-i.bodyDownY;if(o.up&&o.up({action:"up",target:e.element,x:i.bodyMoveX-i.rect.left,y:i.bodyMoveY-i.rect.top,dx:n,dy:a,stopPropagation:t.stopPropagation.bind(t),preventDefault:t.preventDefault.bind(t)}),n*n+a*a<256){var r=Date.now();i.lastTapTime>0&&(o.doubletap&&r-i.lastTapTime<400?o.doubletap({action:"doubletap",target:i.bodyTarget,x:i.bodyMoveX-i.rect.left,y:i.bodyMoveY-i.rect.top,stopPropagation:t.stopPropagation.bind(t),preventDefault:t.preventDefault.bind(t)}):i.lastTapTime=0),o.tap&&0==i.lastTapTime&&(t.stopPropagation(),t.preventDefault(),o.tap({action:"tap",target:i.bodyTarget,x:i.bodyMoveX-i.rect.left,y:i.bodyMoveY-i.rect.top,stopPropagation:t.stopPropagation.bind(t),preventDefault:t.preventDefault.bind(t)})),i.lastTapTime=r}}),a.call(e,t,"mousedown",function(o){if(!i.touchDevice){var n=e._slots,a=t.getBoundingClientRect();i.target=e,i.targetX=o.clientX-a.left,i.targetY=o.clientY-a.top,n.down&&n.down({action:"down",button:i.bodyButton,target:i.bodyTarget,x:i.targetX,y:i.targetY,stopPropagation:o.stopPropagation.bind(o),preventDefault:o.preventDefault.bind(o)})}}),a.call(e,t,"mousemove",function(o){var n=e._slots;if(n.move){var a=t.getBoundingClientRect();o.target.getBoundingClientRect();n.move({target:t,action:"move",x:o.clientX-a.left,y:o.clientY-a.top})}}),Object.defineProperty(this,"element",{value:t,writable:!0,configurable:!0,enumerable:!0})}function a(t,e,o,n){t.addEventListener(e,o,n),this._eventListeners.push([t,e,o,n])}var r=function(){function e(){return n(o,arguments)}var o={en:{}},n=t("$").intl;return e.all=o,e}(),d="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",i={touchDevice:!1,target:null,targetX:0,targetY:0,bodyDownX:0,bodyDownY:0,bodyMoveX:-1,bodyMoveY:-1,bodyMoveLastX:-1,bodyMoveLastY:-1,onDrag:null,lastTapTime:0},p=function(t){i.touchDevice||(i.bodyDownX=t.pageX,i.bodyDownY=t.pageY,i.bodyMoveX=t.pageX,i.bodyMoveY=t.pageY,i.bodyMoveLastX=t.pageX,i.bodyMoveLastY=t.pageY,i.bodyTarget=t.target,i.bodyButton=t.button)},l=function(t){if(!i.touchDevice&&i.target&&(t.stopPropagation(),t.preventDefault(),i.bodyMoveLastX=i.bodyMoveX,i.bodyMoveLastY=i.bodyMoveY,i.bodyMoveX=t.pageX,i.bodyMoveY=t.pageY,i.target)){var e=i.target._slots;"function"==typeof e.drag&&e.drag({action:"drag",target:i.target.element,x0:i.targetX,y0:i.targetY,x:i.targetX+i.bodyMoveX-i.bodyDownX,y:i.targetY+i.bodyMoveY-i.bodyDownY,dx:i.bodyMoveX-i.bodyDownX,dy:i.bodyMoveY-i.bodyDownY,vx:i.bodyMoveX-i.bodyMoveLastX,vy:i.bodyMoveY-i.bodyMoveLastY,button:i.bodyButton})}},u=function(t){if(!i.touchDevice&&i.target){t.stopPropagation(),t.preventDefault();var e=Date.now(),o=i.target._slots,n=t.pageX-i.bodyDownX,a=t.pageY-i.bodyDownY;o.up&&o.up({action:"up",target:i.bodyTarget,x:i.targetX+n,y:i.targetY+a,dx:n,dy:a,button:i.bodyButton,stopPropagation:t.stopPropagation.bind(t),preventDefault:t.preventDefault.bind(t)}),n*n+a*a<1024&&(i.lastTapTime>0&&(o.doubletap&&e-i.lastTapTime<400?o.doubletap({action:"doubletap",target:i.bodyTarget,x:i.targetX+n,y:i.targetY+a}):i.lastTapTime=0),o.tap&&0==i.lastTapTime&&o.tap({action:"tap",target:i.bodyTarget,x:i.targetX+n,y:i.targetY+a}),i.lastTapTime=e),delete i.target}};document.body.addEventListener("mousedown",p,!0),document.body.addEventListener("mousemove",l,!0),document.body.addEventListener("mouseup",u,!0),n.prototype.on=function(t,e){var o=this,n=this._slots;return"function"==typeof e&&(n[t]=e),"wheel"==t&&a.call(o,this.element,d,function(t){var e=o.element.getBoundingClientRect();n.wheel({target:i.bodyTarget,action:"wheel",delta:t.deltaY,x:t.clientX-e.left,y:t.clientY-e.top,stopPropagation:t.stopPropagation.bind(t),preventDefault:t.preventDefault.bind(t)})}),this},n.prototype.off=function(){this._eventListeners.forEach(function(t){var e=t[0],o=t[1],n=t[2],a=t[3];e.removeEventListener(o,n,a)})},e.exports=n,e.exports._=r});
//# sourceMappingURL=tfw.pointer-events.js.map
require("polyfill.classList",function(t,e,n){var i=function(){function e(){return i(n,arguments)}var n={en:{}},i=t("$").intl;return e.all=n,e}();"document"in self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))?function(){"use strict";var t=document.createElement("_");if(t.classList.add("c1","c2"),!t.classList.contains("c2")){var e=function(t){var e=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(t){var n,i=arguments.length;for(n=0;n<i;n++)t=arguments[n],e.call(this,t)}};e("add"),e("remove")}if(t.classList.toggle("c3",!1),t.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:n.call(this,t)}}t=null}():function(t){"use strict";if("Element"in t){var e=t.Element.prototype,n=Object,i=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},s=Array.prototype.indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},r=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},o=function(t,e){if(""===e)throw new r("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(e))throw new r("INVALID_CHARACTER_ERR","String contains an invalid character");return s.call(t,e)},c=function(t){for(var e=i.call(t.getAttribute("class")||""),n=e?e.split(/\s+/):[],s=0,r=n.length;s<r;s++)this.push(n[s]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},a=c.prototype=[],l=function(){return new c(this)};if(r.prototype=Error.prototype,a.item=function(t){return this[t]||null},a.contains=function(t){return t+="",-1!==o(this,t)},a.add=function(){var t,e=arguments,n=0,i=e.length,s=!1;do{t=e[n]+"",-1===o(this,t)&&(this.push(t),s=!0)}while(++n<i);s&&this._updateClassName()},a.remove=function(){var t,e,n=arguments,i=0,s=n.length,r=!1;do{for(t=n[i]+"",e=o(this,t);-1!==e;)this.splice(e,1),r=!0,e=o(this,t)}while(++i<s);r&&this._updateClassName()},a.toggle=function(t,e){t+="";var n=this.contains(t),i=n?!0!==e&&"remove":!1!==e&&"add";return i&&this[i](t),!0===e||!1===e?e:!n},a.toString=function(){return this.join(" ")},n.defineProperty){var u={get:l,enumerable:!0,configurable:!0};try{n.defineProperty(e,"classList",u)}catch(t){-2146823252===t.number&&(u.enumerable=!1,n.defineProperty(e,"classList",u))}}else n.prototype.__defineGetter__&&e.__defineGetter__("classList",l)}}(self)),e.exports._=i});
//# sourceMappingURL=polyfill.classList.js.map
require("polyfill.string",function(r,t,n){var e=function(){function t(){return e(n,arguments)}var n={en:{}},e=r("$").intl;return t.all=n,t}();"function"!=typeof String.toLowerCase&&(String.toLowerCase=function(r){return r.toLowerCase()},String.toUpperCase=function(r){return r.toUpperCase()},String.trim=function(r){return r.trim()}),t.exports._=e});
//# sourceMappingURL=polyfill.string.js.map
require("polyfill.promise",function(t,n,e){var r=function(){function n(){return r(e,arguments)}var e={en:{},fr:{}},r=t("$").intl;return n.all=e,n}();window.Promise||function(){"use strict";function t(t){return"function"==typeof t||"object"==typeof t&&null!==t}function n(t){return"function"==typeof t}function e(t){return"object"==typeof t&&null!==t}function r(){}function o(){for(var t=0;t<S;t+=2){(0,D[t])(D[t+1]),D[t]=void 0,D[t+1]=void 0}S=0}function i(){}function s(){return new TypeError("You cannot resolve a promise with itself")}function u(){return new TypeError("A promises callback cannot return that same promise.")}function c(t){try{return t.then}catch(t){return K.error=t,K}}function a(t,n,e,r){try{t.call(n,e,r)}catch(t){return t}}function f(t,n,e){C(function(t){var r=!1,o=a(e,n,function(e){r||(r=!0,n!==e?_(t,e):v(t,e))},function(n){r||(r=!0,d(t,n))},"Settle: "+(t._label||" unknown promise"));!r&&o&&(r=!0,d(t,o))},t)}function l(t,n){n._state===q?v(t,n._result):t._state===F?d(t,n._result):y(n,void 0,function(n){_(t,n)},function(n){d(t,n)})}function h(t,e){if(e.constructor===t.constructor)l(t,e);else{var r=c(e);r===K?d(t,K.error):void 0===r?v(t,e):n(r)?f(t,e,r):v(t,e)}}function _(n,e){n===e?d(n,s()):t(e)?h(n,e):v(n,e)}function p(t){t._onerror&&t._onerror(t._result),m(t)}function v(t,n){t._state===I&&(t._result=n,t._state=q,0===t._subscribers.length||C(m,t))}function d(t,n){t._state===I&&(t._state=F,t._result=n,C(p,t))}function y(t,n,e,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=n,o[i+q]=e,o[i+F]=r,0===i&&t._state&&C(m,t)}function m(t){var n=t._subscribers,e=t._state;if(0!==n.length){for(var r,o,i=t._result,s=0;s<n.length;s+=3)r=n[s],o=n[s+e],r?g(e,r,o,i):o(i);t._subscribers.length=0}}function w(){this.error=null}function b(t,n){try{return t(n)}catch(t){return N.error=t,N}}function g(t,e,r,o){var i,s,c,a,f=n(r);if(f){if(i=b(r,o),i===N?(a=!0,s=i.error,i=null):c=!0,e===i)return void d(e,u())}else i=o,c=!0;e._state!==I||(f&&c?_(e,i):a?d(e,s):t===q?v(e,i):t===F&&d(e,i))}function A(t,n){try{n(function(n){_(t,n)},function(n){d(t,n)})}catch(n){d(t,n)}}function j(t,n,e,r){this._instanceConstructor=t,this.promise=new t(i,r),this._abortOnReject=e,this._validateInput(n)?(this._input=n,this.length=n.length,this._remaining=n.length,this._init(),0===this.length?v(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&v(this.promise,this._result))):d(this.promise,this._validationError())}function E(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function P(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function T(t,e){this._id=G++,this._label=e,this._state=void 0,this._result=void 0,this._subscribers=[],i!==t&&(n(t)||E(),this instanceof T||P(),A(this,t))}var k;k=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var M,O=k,S=(Date.now,Object.create,0),C=function(t,n){D[S]=t,D[S+1]=n,2===(S+=2)&&M()},R="undefined"!=typeof window?window:{},x=R.MutationObserver||R.WebKitMutationObserver,Y="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,D=new Array(1e3);M="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?function(){return function(){process.nextTick(o)}}():x?function(){var t=0,n=new x(o),e=document.createTextNode("");return n.observe(e,{characterData:!0}),function(){e.data=t=++t%2}}():Y?function(){var t=new MessageChannel;return t.port1.onmessage=o,function(){t.port2.postMessage(0)}}():function(){return function(){setTimeout(o,1)}}();var I=void 0,q=1,F=2,K=new w,N=new w;j.prototype._validateInput=function(t){return O(t)},j.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},j.prototype._init=function(){this._result=new Array(this.length)};var U=j;j.prototype._enumerate=function(){for(var t=this.length,n=this.promise,e=this._input,r=0;n._state===I&&r<t;r++)this._eachEntry(e[r],r)},j.prototype._eachEntry=function(t,n){var r=this._instanceConstructor;e(t)?t.constructor===r&&t._state!==I?(t._onerror=null,this._settledAt(t._state,n,t._result)):this._willSettleAt(r.resolve(t),n):(this._remaining--,this._result[n]=this._makeResult(q,n,t))},j.prototype._settledAt=function(t,n,e){var r=this.promise;r._state===I&&(this._remaining--,this._abortOnReject&&t===F?d(r,e):this._result[n]=this._makeResult(t,n,e)),0===this._remaining&&v(r,this._result)},j.prototype._makeResult=function(t,n,e){return e},j.prototype._willSettleAt=function(t,n){var e=this;y(t,void 0,function(t){e._settledAt(q,n,t)},function(t){e._settledAt(F,n,t)})};var W=function(t,n){return new U(this,t,!0,n).promise},$=function(t,n){function e(t){_(s,t)}function r(t){d(s,t)}var o=this,s=new o(i,n);if(!O(t))return d(s,new TypeError("You must pass an array to race.")),s;for(var u=t.length,c=0;s._state===I&&c<u;c++)y(o.resolve(t[c]),void 0,e,r);return s},z=function(t,n){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var r=new e(i,n);return _(r,t),r},B=function(t,n){var e=this,r=new e(i,n);return d(r,t),r},G=0,H=T;T.all=W,T.race=$,T.resolve=z,T.reject=B,T.prototype={constructor:T,then:function(t,n,e){var r=this,o=r._state;if(o===q&&!t||o===F&&!n)return this;r._onerror=null;var s=new this.constructor(i,e),u=r._result;if(o){var c=arguments[o-1];C(function(){g(o,s,c,u)})}else y(r,s,t,n);return s},catch:function(t,n){return this.then(null,t,n)}};var J=function(){var t;"Promise"in(t="undefined"!=typeof global?global:"undefined"!=typeof window&&window.document?window:self)&&"resolve"in t.Promise&&"reject"in t.Promise&&"all"in t.Promise&&"race"in t.Promise&&function(){var e;return new t.Promise(function(t){e=t}),n(e)}()||(t.Promise=H)};J()}.call(this),n.exports._=r});
//# sourceMappingURL=polyfill.promise.js.map
require("wdg.icon",function(t,H,o){function e(t,H,o){if(i.clear(H),"string"==typeof o){var e=n.Icons[o.trim().toLowerCase()];if(void 0!==e)o=e;else try{o=JSON.parse(o)}catch(t){return console.error("[wdg.icon:content] Bad value: ",o),void console.error(t)}}if(!Array.isArray(o))return void console.error("[wdg.icon:content] Value must be an array: ",o);try{V.call(this,t,H,o)}catch(t){console.error("[wdg.icon:content] Bad content: ",o),console.error(t)}}function V(t,H,o){if("string"==typeof o){var e=window.document.createTextNode(o);return void H.appendChild(e)}if(!Array.isArray(o)||0==o.length)return console.error("[wdg.icon:content] `child` must be an array: ",o),void console.error("parent = ",H);var r;o.forEach(function(o,e){var C,M;if(0==e)r=i.svg(o),i.add(H,r);else if("string"==typeof o)i.addClass(r,o);else if(Array.isArray(o))o.forEach(function(H){V.call(this,t,r,H)},this);else if("object"==typeof o)for(C in o)M=""+o[C],("fill"==C||"stroke"==C)&&l.indexOf(M)>-1&&"01".indexOf(M)>-1&&(void 0===t[M]&&(t[M]={fill:[],stroke:[]}),t[M][C].push(r)),i.att(r,C,M)},this)}function r(t){return["g",[["path",{d:t,stroke:1,"stroke-width":36}],["path",{d:t,stroke:0,"stroke-width":24}]]]}function C(t){return["g",[["path",{d:t,stroke:1,fill:"none","stroke-width":12}],["path",{d:t,stroke:"none",fill:0}]]]}var M=function(){function H(){return e(o,arguments)}var o={en:{}},e=t("$").intl;return H.all=o,H}(),i=t("dom"),L=t("tfw.data-binding"),l=(t("tfw.touchable"),["0","1","P","PL","PD","S","SL","SD"]),n=function(t){var H=this,o=[],V=i.svg("g",{"stroke-width":6,fill:"none","stroke-linecap":"round","stroke-linejoin":"round"}),r=i.svgRoot("wdg-icon",{width:"100%",height:"100%",viewBox:"-65 -65 130 130",preserveAspectRatio:"xMidYMid meet"});i.elem(this,r);i.add(r,V),L.prop(this,"value"),L.propBoolean(this,"rotate")(function(t){t?i.addClass(r,"rotate"):i.removeClass(r,"rotate")}),L.propUnit(this,"size")(function(t){var H=t.v+t.u;i.css(r,{width:H,height:H,"line-height":H})}),L.propAddClass(this,"wide"),L.propRemoveClass(this,"visible","hide");var C=function(t){var e=o[t];if(void 0!==e){e.fill.forEach(function(t){l.forEach(function(H){i.removeClass(t,H)}),i.removeAtt(t,"fill")}),e.stroke.forEach(function(t){l.forEach(function(H){i.removeClass(t,H)}),i.removeAtt(t,"stroke")});var V=""+H["color"+t];l.indexOf(V)>-1?(e.fill.forEach(function(t){i.addClass(t,"fill"+V)}),e.stroke.forEach(function(t){i.addClass(t,"stroke"+V)})):(e.fill.forEach(function(t){i.att(t,"fill",V)}),e.stroke.forEach(function(t){i.att(t,"stroke",V)}))}};L.prop(this,"content")(function(t){e.call(H,o,V,t);for(var r=0;r<2;r++)C(r)});for(var M=0;M<2;M++)L.propColor(this,"color"+M)(C.bind(this,M));t=L.extend({content:["circle",{stroke:1,fill:0,r:90,cx:0,cy:0}],color0:"0",color1:"1",angle:0,size:"2rem",value:"icon",rotate:!1,wide:!1,visible:!0},t,this)};n.Icons={android:C("M15,-35H10V-40H15M-10,-35H-15V-40H-10M18,-49L24,-56C25,-57,25,-58,24,-59C23,-60,22,-60,21,-59L13,-52C9,-54,5,-55,0,-55C-5,-55,-9,-54,-13,-52L-21,-59C-22,-60,-23,-60,-24,-59C-25,-58,-25,-57,-24,-56L-18,-49C-25,-44,-30,-35,-30,-25H30C30,-35,25,-44,18,-49M43,-20A8,8,0,0,0,35,-12V23A8,8,0,0,0,43,30A8,8,0,0,0,50,23V-12A8,8,0,0,0,43,-20M-42,-20A8,8,0,0,0,-50,-12V23A8,8,0,0,0,-42,30A8,8,0,0,0,-35,23V-12A8,8,0,0,0,-42,-20M-30,30A5,5,0,0,0,-25,35H-20V53A8,8,0,0,0,-12,60A8,8,0,0,0,-5,53V35H5V53A8,8,0,0,0,13,60A8,8,0,0,0,20,53V35H25A5,5,0,0,0,30,30V-20H-30V30Z"),bug:C("M10,0H-10V-10H10M10,20H-10V10H10M40,-20H26C24,-24 21,-27 17,-30L25,-38L18,-45L7,-34C5,-35 3,-35 0,-35C-2,-35 -5,-35 -7,-34L-18,-45L-25,-38L-17,-30C-21,-27 -24,-24 -26,-20H-40V-10H-30C-30,-8 -30,-7 -30,-5V0H-40V10H-30V15C-30,17 -30,18 -30,20H-40V30H-26C-21,39 -11,45 0,45C11,45 21,39 26,30H40V20H30C30,18 30,17 30,15V10H40V0H30V-5C30,-7 30,-8 30,-10H40V-20Z"),camera:C("M-40,-40H-25L-15,-50H15L25,-40H40A10,10,0,0,1,50,-30V30A10,10,0,0,1,40,40H-40A10,10,0,0,1,-50,30V-30A10,10,0,0,1,-40,-40M0,-25A25,25,0,0,0,-25,0A25,25,0,0,0,0,25A25,25,0,0,0,25,0A25,25,0,0,0,0,-25M0,-15A15,15,0,0,1,15,0A15,15,0,0,1,0,15A15,15,0,0,1,-15,0A15,15,0,0,1,0,-15Z"),cancel:["g",[["path",{d:"M-30,-30L30,30M-30,30L30,-30",stroke:0,"stroke-width":30}],["path",{d:"M-30,-30L30,30M-30,30L30,-30",stroke:1,"stroke-width":16}]]],center:C("M0,-15A15,15,0,0,0,-15,0A15,15,0,0,0,0,15A15,15,0,0,0,15,0A15,15,0,0,0,0,-15M35,35H15V45H35A10,10,0,0,0,45,35V15H35M35,-45H15V-35H35V-15H45V-35A10,10,0,0,0,35,-45M-35,-35H-15V-45H-35A10,10,0,0,0,-45,-35V-15H-35M-35,15H-45V35A10,10,0,0,0,-35,45H-15V35H-35V15Z"),close:r("M-40,-40L40,40M-40,40L40,-40"),code:C("M13,23L36,0L13,-23L20,-30L50,0L20,30L13,23M-13,23L-36,0L-13,-23L-20,-30L-50,0L-20,30L-13,23Z"),delete:C("M35,-40H18L13,-45H-12L-17,-40H-35V-30H35M-30,35A10,10,0,0,0,-20,45H20A10,10,0,0,0,30,35V-25H-30V35Z"),direction:C("M10,13V0H-10V15H-20V-5A5,5,0,0,1,-15,-10H10V-22L28,-5M49,-4L4,-49H3C2,-50,-2,-50,-4,-49L-49,-4C-50,-2,-50,2,-49,4L-4,49C-2,50,2,51,4,49L49,4C51,2,51,-2,49,-4Z"),down:r("M-30,-30L0,30,30,-30"),"down-double":r("M-30,-40L0,-10,30,-40M-30,10L0,40,30,10"),edit:C("M24,-46C22,-46,20,-46,19,-44L8,-34L35,-7L45,-17C48,-21,48,-25,45,-28L29,-44C28,-46,26,-46,24,-46M5,-30L-36,11L-23,12L-22,23L-11,24L-9,37L31,-3M-39,15L-47,49L-14,40L-15,29L-27,28L-28,16"),eraser:C("M21,-42L46,-17C50,-14,50,-7,46,-3L0,43C-8,50,-20,50,-28,43L-46,25C-50,21,-50,15,-46,11L7,-42C11,-46,17,-46,21,-42M-39,18L-21,36C-17,39,-11,39,-7,36L11,18L-14,-7L-39,18Z"),export:C("M-35,40H35V30H-35M35,-15H15V-45H-15V-15H-35L0,20L35,-15Z"),"flag-jp":["g",{stroke:"none"},[["path",{fill:"#000",d:"M-65,50h130v-100h-130z"}],["path",{fill:"#fff",d:"M-60,45h120v-90h-120z"}],["circle",{fill:"#bc002d",r:24}]]],"flag-fr":["g",{stroke:"none"},[["path",{fill:"#000",d:"M-65,50h130v-100h-130z"}],["path",{fill:"#002395",d:"M-60,45h40v-90h-40z"}],["path",{fill:"#fff",d:"M-20,45h40v-90h-40z"}],["path",{fill:"#ed2939",d:"M20,45h40v-90h-40z"}]]],"flag-it":["g",{stroke:"none"},[["path",{fill:"#000",d:"M-65,50h130v-100h-130z"}],["path",{fill:"#009246",d:"M-60,45h40v-90h-40z"}],["path",{fill:"#fff",d:"M-20,45h40v-90h-40z"}],["path",{fill:"#ce2b37",d:"M20,45h40v-90h-40z"}]]],"flag-de":["g",{stroke:"none"},[["path",{fill:"#000",d:"M-65,41h130v-82h-130z"}],["path",{fill:"#ffce00",d:"M-60,36h120v-24h-120z"}],["path",{fill:"#dd0000",d:"M-60,12h120v-24h-120z"}]]],"flag-en":["g",{stroke:"none"},[["path",{fill:"#000",d:"M-65,37h130v-75h-130z"}],["path",{fill:"#bb133e",d:"M-60,32h120v-65h-120z"}],["path",{fill:"#fff",d:"M-60,22h120v5h-120z"}],["path",{fill:"#fff",d:"M-60,12h120v5h-120z"}],["path",{fill:"#fff",d:"M-60,2h120v5h-120z"}],["path",{fill:"#fff",d:"M-60,-8h120v5h-120z"}],["path",{fill:"#fff",d:"M-60,-18h120v5h-120z"}],["path",{fill:"#fff",d:"M-60,-28h120v5h-120z"}],["path",{fill:"#002664",d:"M-60,-33h48v35h-48z"}]]],font:C("M25,-20H40V40H45V45H25V40H30V25H10L3,40H10V45H-10V40H-5L25,-20M30,-15L13,20H30V-15M-35,-45H-10C-4,-45,0,-41,0,-35V20H-15V-5H-30V20H-45V-35C-45,-41,-41,-45,-35,-45M-30,-35V-15H-15V-35H-30Z"),"format-align-center":C("M-45,-45H45V-35H-45V-45M-25,-25H25V-15H-25V-25M-45,-5H45V5H-45V-5M-25,15H25V25H-25V15M-45,35H45V45H-45V35Z"),"format-align-justify":C("M-45,-45H45V-35H-45V-45M-45,-25H45V-15H-45V-25M-45,-5H45V5H-45V-5M-45,15H45V25H-45V15M-45,35H45V45H-45V35Z"),"format-align-left":C("M-45,-45H45V-35H-45V-45M-45,-25H15V-15H-45V-25M-45,-5H45V5H-45V-5M-45,15H15V25H-45V15M-45,35H45V45H-45V35Z"),"format-align-right":C(" M-45,-45H45V-35H-45V-45M-15,-25H45V-15H-15V-25M-45,-5H45V5H-45V-5M-15,15H45V25H-15V15M-45,35H45V45H-45V35Z "),"format-bold":C("M8,18H-10V3H8A8,8,0,0,1,15,10A8,8,0,0,1,8,18M-10,-27H5A8,8,0,0,1,13,-20A8,8,0,0,1,5,-12H-10M18,-6C23,-9,26,-15,26,-20C26,-31,18,-40,6,-40H-25V30H10C21,30,29,22,29,11C29,3,24,-3,18,-6Z"),"format-italic":C("M-10,-40V-25H1L-16,15H-30V30H10V15H-1L16,-25H30V-40H-10Z"),"format-float-center":C("M-15,-25H15V5H-15V-25M-45,-45H45V-35H-45V-45M-45,15H45V25H-45V15M-45,35H25V45H-45V35Z"),"format-float-left":C("M-45,-25H-15V5H-45V-25M-45,-45H45V-35H-45V-45M45,-25V-15H-5V-25H45M45,-5V5H-5V-5H45M-45,15H25V25H-45V15M-45,35H45V45H-45V35Z"),"format-float-none":C("M-45,-25H-15V5H-45V-25M-45,-45H45V-35H-45V-45M45,-5V5H-5V-5H45M-45,15H25V25H-45V15M-45,35H45V45H-45V35Z"),"format-float-right":C("M15,-25H45V5H15V-25M-45,-45H45V-35H-45V-45M5,-25V-15H-45V-25H5M-15,-5V5H-45V-5H-15M-45,15H25V25H-45V15M-45,35H45V45H-45V35Z"),"format-header":C("M-40,-40H-30V-10H-10V-40H0V30H-10V0H-30V30H-40V-40M13,-23L31,-5L13,13L20,20L45,-5L20,-30L13,-23Z"),"format-underline":C("M-35,45H35V35H-35V45M0,25A30,30,0,0,0,30,-5V-45H18V-5A18,18,0,0,1,0,13A18,18,0,0,1,-17,-5V-45H-30V-5A30,30,0,0,0,0,25Z"),fullscreen:C("M-35,-35H-10V-25H-25V-10H-35V-35M10,-35H35V-10H25V-25H10V-35M25,10H35V35H10V25H25V10M-10,25V35H-35V10H-25V25H-10Z"),gear:C("M0,18A18,18,0,0,1,-17,0A18,18,0,0,1,0,-17A18,18,0,0,1,18,0A18,18,0,0,1,0,18M37,5C37,3,38,2,38,0C38,-2,37,-3,37,-5L48,-13C49,-14,49,-15,48,-16L38,-34C38,-35,36,-35,35,-35L23,-30C20,-32,18,-33,14,-35L13,-48C12,-49,11,-50,10,-50H-10C-11,-50,-12,-49,-12,-48L-14,-35C-17,-33,-20,-32,-23,-30L-35,-35C-36,-35,-38,-35,-38,-34L-48,-16C-49,-15,-49,-14,-48,-13L-37,-5C-37,-3,-37,-2,-37,0C-37,2,-37,3,-37,5L-48,13C-49,14,-49,15,-48,16L-38,34C-38,35,-36,35,-35,35L-23,30C-20,32,-17,33,-14,35L-12,48C-12,49,-11,50,-10,50H10C11,50,12,49,13,48L14,35C18,33,20,32,23,30L35,35C36,35,38,35,38,34L48,16C49,15,49,14,48,13L37,5Z"),gps:C("M0,-20A20,20,0,0,1,20,0A20,20,0,0,1,0,20A20,20,0,0,1,-20,0A20,20,0,0,1,0,-20M-45,5H-55V-5H-45C-42,-26,-26,-42,-5,-45V-55H5V-45C26,-42,43,-26,45,-5H55V5H45C43,26,26,43,5,45V55H-5V45C-26,43,-42,26,-45,5M0,-35A35,35,0,0,0,-35,0A35,35,0,0,0,0,35A35,35,0,0,0,35,0A35,35,0,0,0,0,-35Z"),hand:C("M-10,-50A10,10,0,0,1,0,-40V-17C0,-17,10,-19,10,-14C10,-14,20,-15,20,-10C20,-10,30,-11,30,-6C30,-6,40,-7,40,-2V15C40,20,25,45,25,50H-15C-15,50,-25,15,-40,5C-40,5,-45,-25,-20,0V-40A10,10,0,0,1,-10,-50Z"),heart:C("M0,47L-7,40C-33,17,-50,1,-50,-17C-50,-33,-38,-45,-22,-45C-14,-45,-5,-41,0,-35C5,-41,14,-45,23,-45C38,-45,50,-33,50,-17C50,1,33,17,7,40L0,47Z"),hide:C("M-1,-15L15,1C15,1,15,0,15,0A15,15,0,0,0,0,-15C0,-15,-1,-15,-1,-15M-22,-11L-15,-3C-15,-2,-15,-1,-15,0A15,15,0,0,0,0,15C1,15,2,15,3,15L11,22C8,24,4,25,0,25A25,25,0,0,1,-25,0C-25,-4,-24,-8,-22,-11M-50,-39L-39,-27L-36,-25C-45,-18,-51,-10,-55,0C-46,22,-25,38,0,38C8,38,15,36,22,33L24,35L39,50L45,44L-44,-45M0,-25A25,25,0,0,1,25,0C25,3,24,6,23,9L38,24C45,18,51,9,55,0C46,-22,25,-37,0,-37C-7,-37,-14,-36,-20,-34L-9,-23C-6,-24,-3,-25,0,-25Z"),home:C("M-10,40V10H10V40H35V0H50L0,-45L-50,0H-35V40H-10Z"),image:C("M5,-15H33L5,-42V-15M-30,-50H10L40,-20V40A10,10,0,0,1,30,50H-30C-36,50,-40,46,-40,40V-40C-40,-46,-36,-50,-30,-50M-30,40H15L30,40V0L10,20L0,10L-30,40M-20,-15A10,10,0,0,0,-30,-5A10,10,0,0,0,-20,5A10,10,0,0,0,-10,-5A10,10,0,0,0,-20,-15Z"),import:C("M-15,20V-10H-35L0,-45L35,-10H15V20H-15M-35,40V30H35V40H-35Z"),improvement:C("M0,50A50,50,0,0,1,-50,0A50,50,0,0,1,0,-50A50,50,0,0,1,50,0A50,50,0,0,1,0,50M0,-25L-25,0H-10V20H10V0H25L0,-25Z"),info:C("M8,-40A8,8,0,0,0,0,-32A8,8,0,0,0,8,-25A8,8,0,0,0,15,-32A8,8,0,0,0,8,-40M6,-16C0,-16,-17,-3,-17,-3C-17,-2,-17,-2,-16,-1C-16,1,-16,1,-15,0C-14,0,-12,-2,-9,-3C1,-10,-8,6,-12,32C-14,45,-2,39,1,37C4,35,12,29,13,28C14,28,13,27,12,26C12,25,11,26,11,26C8,28,2,32,1,29C0,27,6,7,9,-6C10,-10,12,-17,6,-16Z"),left:r("M30,-30L-30,0,30,30"),"left-double":r("M-10,-30L-40,0,-10,30M40,-30L10,0,40,30"),link:C("M-7,7C-5,9,-5,12,-7,14C-9,16,-12,16,-14,14C-24,4,-24,-11,-14,-21V-21L4,-39C13,-49,29,-49,39,-39C49,-29,49,-13,39,-4L31,4C32,0,31,-4,29,-8L32,-11C38,-16,38,-26,32,-32C26,-38,16,-38,11,-32L-7,-14C-13,-8,-13,1,-7,7M7,-14C9,-16,12,-16,14,-14C24,-4,24,11,14,21V21L-4,39C-13,49,-29,49,-39,39C-49,29,-49,13,-39,4L-31,-4C-31,0,-31,4,-29,8L-32,11C-38,16,-38,26,-32,32C-26,38,-16,38,-11,32L7,14C13,8,13,-1,7,-7C5,-9,5,-12,7,-14Z"),location:C("M0,-2A13,13,0,0,1,-12,-15A13,13,0,0,1,0,-27A13,13,0,0,1,13,-15A13,13,0,0,1,0,-2M0,-50A35,35,0,0,0,-35,-15C-35,11,0,50,0,50C0,50,35,11,35,-15A35,35,0,0,0,0,-50Z"),logout:C("M25,26V10H-10V-10H25V-26L51,0L25,26M5,-50A10,10,0,0,1,15,-40V-20H5V-40H-40V40H5V20H15V40A10,10,0,0,1,5,50H-40A10,10,0,0,1,-50,40V-40A10,10,0,0,1,-40,-50H5Z"),mail:C("M40,-40H-40A10,10,0,0,0,-50,-30V30A10,10,0,0,0,-40,40H40A10,10,0,0,0,50,30V-30A10,10,0,0,0,40,-40M40,30H-40V-20L0,5L40,-20V30M40,-30L0,-5L-40,-30V-30H40V-30Z"),"map-layer":C("M0,20L37,-9L45,-15L0,-50L-45,-15L-37,-9M0,33L-37,4L-45,10L0,45L45,10L37,4L0,33Z"),menu:C("M-45,-30H45V-20H-45V-30M-45,-5H45V5H-45V-5M-45,20H45V30H-45V20Z"),minus:r("M-45,0H45"),"minus-o":["g",[["circle",{r:60,stroke:"none",fill:0}],["circle",{r:50,stroke:"none",fill:1}],["path",{d:"M-30,0H30",fill:"none",stroke:0,"stroke-width":16}]]],"minus-small":r("M-30,0H30"),ok:["g",[["path",{d:"M-30,0L-10,30,30,-30",stroke:1,"stroke-width":30}],["path",{d:"M-30,0L-10,30,30,-30",stroke:0,"stroke-width":16}]]],plus:r("M-45,0H45M0,-45V45"),"plus-o":["g",[["circle",{r:60,stroke:"none",fill:0}],["circle",{r:50,stroke:"none",fill:1}],["path",{d:"M-30,0H30M0,-30V30",fill:"none",stroke:0,"stroke-width":16}]]],"plus-small":r("M-30,0H30M0,-30V30"),print:["path",{fill:0,d:"M30,-45H-30V-25H30M35,0A5,5,0,0,1,30,-5A5,5,0,0,1,35,-10A5,5,0,0,1,40,-5A5,5,0,0,1,35,0M20,35H-20V10H20M35,-20H-35A15,15,0,0,0,-50,-5V25H-30V45H30V25H50V-5A15,15,0,0,0,35,-20Z"}],question:C("M-10,35H5V50H-10V35M0,-50C27,-49,38,-22,23,-2C18,3,12,7,8,11C5,15,5,20,5,25H-10C-10,17,-10,10,-7,5C-3,0,3,-3,8,-7C20,-18,17,-34,0,-35A15,15,0,0,0,-15,-20H-30A30,30,0,0,1,0,-50Z"),redo:C("M32,-7C23,-15,11,-20,-2,-20C-26,-20,-45,-5,-52,16L-40,20C-35,4,-20,-7,-2,-7C7,-7,16,-4,23,2L5,20H50V-25L32,-7Z"),refresh:C("M28,-28C21,-35,11,-40,0,-40A40,40,0,0,0,-40,0A40,40,0,0,0,0,40C19,40,34,27,39,10H28C24,22,13,30,0,30A30,30,0,0,1,-30,0A30,30,0,0,1,0,-30C8,-30,16,-27,21,-21L5,-5H40V-40L28,-28Z"),right:r("M-30,-30L30,0,-30,30"),"right-double":r("M10,-30L40,0,10,30M-40,-30L-10,0,-40,30"),search:C("M-12,-45A33,33,0,0,1,20,-12C20,-4,17,3,12,9L14,10H18L43,35L35,43L10,18V14L9,12C3,17,-4,20,-12,20A33,33,0,0,1,-45,-12A33,33,0,0,1,-12,-45M-12,-35C-25,-35,-35,-25,-35,-12C-35,0,-25,10,-12,10C0,10,10,0,10,-12C10,-25,0,-35,-12,-35Z"),select:C("M35,35H-35V-35H15V-45H-35C-41,-45,-45,-41,-45,-35V35A10,10,0,0,0,-35,45H35A10,10,0,0,0,45,35V-5H35M-20,-10L-27,-2L-5,20L45,-30L38,-37L-5,6L-20,-10Z"),unselect:C("M35,-45H-35C-41,-45,-45,-41,-45,-35V35A10,10,0,0,0,-35,45H35A10,10,0,0,0,45,35V-35C45,-41,41,-45,35,-45M35,-35V35H-35V-35H35Z"),share:C("M30,20C26,20,23,22,20,24L-15,3C-15,2,-15,1,-15,0C-15,-1,-15,-2,-15,-3L20,-24C23,-22,26,-20,30,-20A15,15,0,0,0,45,-35A15,15,0,0,0,30,-50A15,15,0,0,0,15,-35C15,-34,15,-33,15,-31L-20,-11C-22,-13,-26,-15,-30,-15A15,15,0,0,0,-45,0A15,15,0,0,0,-30,15C-26,15,-22,13,-20,11L16,32C16,33,15,34,15,35C15,43,22,50,30,50C38,50,45,43,45,35A15,15,0,0,0,30,20Z"),show:C("M0,-15A15,15,0,0,0,-15,0A15,15,0,0,0,0,15A15,15,0,0,0,15,0A15,15,0,0,0,0,-15M0,25A25,25,0,0,1,-25,0A25,25,0,0,1,0,-25A25,25,0,0,1,25,0A25,25,0,0,1,0,25M0,-37C-25,-37,-46,-22,-55,0C-46,22,-25,38,0,38C25,38,46,22,55,0C46,-22,25,-37,0,-37Z"),speaker:C("M40,35L33,28C41,21,45,11,45,0C45,-11,41,-21,33,-28L40,-35C49,-26,55,-14,55,0C55,14,49,26,40,35M26,21L19,14C23,11,25,6,25,0C25,-6,23,-11,19,-14L26,-21C32,-16,35,-8,35,0C35,8,32,16,26,21M-40,-45H0A10,10,0,0,1,10,-35V35A10,10,0,0,1,0,45H-40A10,10,0,0,1,-50,35V-35A10,10,0,0,1,-40,-45M-20,-35A10,10,0,0,0,-30,-25A10,10,0,0,0,-20,-15A10,10,0,0,0,-10,-25A10,10,0,0,0,-20,-35M-20,-5A20,20,0,0,0,-40,15A20,20,0,0,0,-20,35A20,20,0,0,0,0,15A20,20,0,0,0,-20,-5M-20,5A10,10,0,0,1,-10,15A10,10,0,0,1,-20,25A10,10,0,0,1,-30,15A10,10,0,0,1,-20,5Z"),star:C("M0,26L31,45L23,10L50,-14L14,-17L0,-50L-14,-17L-50,-14L-23,10L-31,45L0,26Z"),"tri-down":["g",[["path",{d:"M-30,-30L0,30,30,-30Z",stroke:0,fill:1,"stroke-width":8}]]],"tri-left":["g",[["path",{d:"M30,-30L-30,0,30,30Z",stroke:0,fill:1,"stroke-width":8}]]],"tri-right":["g",[["path",{d:"M-30,-30L30,0,-30,30Z",stroke:0,fill:1,"stroke-width":8}]]],"tri-up":["g",[["path",{d:"M-30,30L0,-30,30,30Z",stroke:0,fill:1,"stroke-width":8}]]],twitter:C("M52,-30C48,-28,44,-27,40,-27C44,-29,48,-33,49,-38C45,-36,41,-34,36,-33C32,-37,26,-40,20,-40C8,-40,-1,-30,-1,-19C-1,-17,-1,-15,-1,-14C-19,-15,-34,-23,-45,-36C-47,-33,-48,-29,-48,-25C-48,-18,-44,-11,-38,-7C-42,-7,-45,-8,-48,-10C-48,-10,-48,-10,-48,-10C-48,1,-41,9,-31,11C-33,12,-35,12,-37,12C-38,12,-39,12,-41,12C-38,20,-30,26,-21,26C-28,32,-37,36,-47,36C-49,36,-51,36,-52,35C-43,41,-31,45,-19,45C20,45,42,12,42,-16C42,-17,42,-18,42,-19C46,-22,49,-26,52,-30Z"),undo:C("M3,-20C-11,-20,-23,-15,-32,-7L-50,-25V20H-5L-23,2C-16,-4,-7,-7,3,-7C20,-7,35,4,41,20L52,16C45,-5,26,-20,3,-20Z"),up:r("M-30,30L0,-30,30,30"),"up-double":r("M-30,40L0,10,30,40M-30,-10L0,-40,30,-10"),user:C("M0,-40A20,20,0,0,1,20,-20A20,20,0,0,1,0,0A20,20,0,0,1,-20,-20A20,20,0,0,1,0,-40M0,10C22,10,40,19,40,30V40H-40V30C-40,19,-22,10,0,10Z"),wait:["g",[["path",{d:"M0,40 A40,40,0,1,1,40,0",stroke:0,"stroke-width":40}],["path",{d:"M0,40 A40,40,0,1,1,40,0",stroke:1,"stroke-width":24}]]],"zoom-in":["g",[C("M-12,-45A33,33,0,0,1,20,-12C20,-4,17,3,12,9L14,10H18L43,35L35,43L10,18V14L9,12C3,17,-4,20,-12,20A33,33,0,0,1,-45,-12A33,33,0,0,1,-12,-45M-12,-35C-25,-35,-35,-25,-35,-12C-35,0,-25,10,-12,10C0,10,10,0,10,-12C10,-25,0,-35,-12,-35Z"),C("M-50,42h10v-10h4v10h10v4h-10v10h-4v-10h-10Z")]],"zoom-out":["g",[C("M-12,-45A33,33,0,0,1,20,-12C20,-4,17,3,12,9L14,10H18L43,35L35,43L10,18V14L9,12C3,17,-4,20,-12,20A33,33,0,0,1,-45,-12A33,33,0,0,1,-12,-45M-12,-35C-25,-35,-35,-25,-35,-12C-35,0,-25,10,-12,10C0,10,10,0,10,-12C10,-25,0,-35,-12,-35Z"),C("M-50,42h24v4h-32Z")]]},n.Icons.add=n.Icons.plus,n.Icons.back=n.Icons.left,n.Icons.help=n.Icons.question,n.Icons.save=n.Icons.export,n.draw=r,n.path2=C,n.register=function(t){var H,o;for(H in t)o=t[H],n.Icons[H]=o},H.exports=n,H.exports._=M});
//# sourceMappingURL=wdg.icon.js.map
require("font.roboto",function(n,r,t){var o=function(){function r(){return o(t,arguments)}var t={en:{},fr:{}},o=n("$").intl;return r.all=t,r}();r.exports._=o});
//# sourceMappingURL=font.roboto.js.map
require("wdg.flex",function(e,s,t){function a(e){var s=n.elem(this,"div","wdg-flex");i.propToggleClass(this,"orientation",o),i.propToggleClass(this,"type",c),i.propArray(this,"content")(function(e){n.clear(s),e.forEach(function(e){n.add(s,e),void 0!==e.$grow&&n.css(e,{"flex-grow":parseFloat(e.$grow)}),void 0!==e.$shrink&&n.css(e,{"flex-shrink":parseFloat(e.$shrink)})})}),i.propString(this,"justify")(function(e){n.removeClass(s,"justify-center","justify-flex-end","justify-flex-start","justify-space-around","justify-space-between");var t=null;switch(e.trim().toLowerCase()){case"center":t="center";break;case"flex-end":case"flexend":case"end":t="flex-end";break;case"flex-start":case"flexstart":case"start":t="flex-start";break;case"space-around":case"around":t="space-around";break;case"space-between":case"between":t="space-between"}t&&n.addClass(s,"justify-"+t)}),i.propAddClass(this,"wide"),i.propRemoveClass(this,"visible","hide"),e=i.extend({orientation:o[0],type:c[0],justify:"space-around",content:[],wide:!0,visible:!0},e,this)}var r=function(){function s(){return a(t,arguments)}var t={en:{}},a=e("$").intl;return s.all=t,s}(),n=e("dom"),i=e("tfw.data-binding"),o=["H","V","W","N"],c=["default","fill"];s.exports=a,s.exports._=r});
//# sourceMappingURL=wdg.flex.js.map
require("game2.hero",function(t,n,i){function e(t,n){var i=t.createTexture();return t.bindTexture(t.TEXTURE_2D,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,i),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n.hero),i}var r=function(){function n(){return e(i,arguments)}var i={en:{},fr:{}},e=t("$").intl;return n.all=i,n}(),a={vert:"precision mediump float;\n\nuniform float uniWidth;\nuniform float uniHeight;\nuniform float uniX;\nuniform float uniY;\nuniform float uniZ;\nuniform float uniTime;\nuniform int uniFlip;\n\nattribute vec2 attXY;\nattribute vec2 attUV;\nvarying vec2 varUV;\n\nconst float FACTOR = 0.3;\n\nvoid main() {\n  varUV = vec2( attUV.x, 1.0 - attUV.y );\n  float alpha = abs(cos( uniTime * 0.003 ));\n  float X = mix(attXY.x, attUV.x, alpha);\n  float Y = mix(attXY.y, attUV.y, alpha);\n  \n  float x = X * 0.6;\n  if( uniFlip == 1 ) {\n    x = 0.5 - x;\n  }\n  float y = Y;\n  \n  x *= FACTOR * uniHeight / uniWidth;\n  y *= FACTOR;\n  \n  gl_Position = vec4( x, y, 0.0, 1.0 );\n}\n",frag:"precision mediump float;\n\nvarying vec2 varUV;\n\n// Textures.\nuniform sampler2D tex;\n\nvoid main() { \n  gl_FragColor = texture2D(tex, varUV);\n  if( gl_FragColor.a <= 1.0 / 255.0 ) discard;\n}\n"},u=t("webgl.program"),T=t("game2.controls"),o=function(t,n){this._texture=e(t,n);var i=new Float32Array([0,0,0,0,1,0,1,0,0,.125,-.08,.09375,1,.125,1.08,.09375,0,.25,-.12,.1875,1,.25,1.12,.1875,0,.375,-.08,.28125,1,.375,1.08,.28125,0,.5,0,.375,1,.5,1,.375,0,1,0,.875,1,1,1,.875]),r=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,r),t.bufferData(t.ARRAY_BUFFER,i,t.STATIC_DRAW),this._buff=r,this._prg=new u(t,{vert:a.vert,frag:a.frag}),t.bindBuffer(t.ARRAY_BUFFER,r),t.bufferSubData(t.ARRAY_BUFFER,0,i)};n.exports=o,o.prototype.paint=function(t){var n=t.gl,i=this._prg;t.time;i.use(),i.$uniWidth=n.canvas.width,i.$uniHeight=n.canvas.height,i.$uniTime=t.time,i.$uniX=t.x,i.$uniY=t.y,i.$uniZ=t.z,i.$uniFlip=T.W?1:0,n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,this._texture),i.$tex=0,i.bindAttribs(this._buff,"attUV","attXY"),n.drawArrays(n.TRIANGLE_STRIP,0,12)},n.exports._=r});
//# sourceMappingURL=game2.hero.js.map
require("game2.sequence.init",function(n,e,t){function i(n){n.setNextSequence("PlayTime")}var r=function(){function e(){return i(t,arguments)}var t={en:{},fr:{}},i=n("$").intl;return e.all=t,e}();i.init=function(n){},e.exports=i,e.exports._=r});
//# sourceMappingURL=game2.sequence.init.js.map
require("webgl.resize",function(n,t,e){var i=function(){function t(){return i(e,arguments)}var e={en:{},fr:{}},i=n("$").intl;return t.all=e,t}();t.exports=function(n,t){"number"!=typeof t&&(t=window.devicePixelRatio);var e=Math.floor(n.canvas.clientWidth*t),i=Math.floor(n.canvas.clientHeight*t);n.canvas.width===e&&n.canvas.height===i||(n.canvas.width=e,n.canvas.height=i,n.viewport(0,0,e,i))},t.exports._=i});
//# sourceMappingURL=webgl.resize.js.map
require("splash",function(n,o,e){var i=function(){function o(){return i(e,arguments)}var e={en:{},fr:{}},i=n("$").intl;return o.all=e,o}();n("polyfill.promise");var t=n("dom");o.exports=function(n){var o=t.div("splash",[t.div(["TOLOKOBAN"])]);return t.add(document.body,o),new Promise(function(e,i){window.setTimeout(function(){t.addClass(o,"show")});var r=new Promise(function(o,e){var i,t,r,s={},u=0;for(i in n)u++;var a=function(){--u<=0&&o(s)};for(i in n)t=n[i],r=new Image,r.$key=i,r.src=t,r.onload=function(){s[this.$key]=this,a()},r.onerror=function(){console.error("Unable to load image: ",n[this.$key]),s[this.$key]=null,a()}});window.setTimeout(function(){r.then(function(n){e(n),t.addClass(o,"hide"),window.setTimeout(function(){t.detach(o)},300)})},1e3)})},o.exports._=i});
//# sourceMappingURL=splash.js.map
require("tfw.message",function(e,n,o){function r(e,n,o){u||(u=l.div("tfw-message","thm-ele24"),document.body.appendChild(u)),"number"!=typeof o&&(o=5e3),l.removeClass(u,"info","error"),l.addClass(u,e),l.clear(u,n),window.setTimeout(function(){l.addClass(u,"show")}),i&&window.clearTimeout(i),i=window.setTimeout(function(){l.removeClass(u,"show")},o)}var i,t=function(){function n(){return r(o,arguments)}var o={en:{}},r=e("$").intl;return n.all=o,n}(),l=e("dom"),u=null;o.info=r.bind(null,"info"),o.error=r.bind(null,"error"),o.clear=function(){i&&window.clearTimeout(i),l.addRemove(u,"show")},n.exports._=t});
//# sourceMappingURL=tfw.message.js.map
require("game2.gfx",function(n,r,e){var t=function(){function r(){return t(e,arguments)}var e={en:{},fr:{}},t=n("$").intl;return r.all=e,r}();r.exports._=t});
//# sourceMappingURL=game2.gfx.js.map
require("x-widget",function(e,r,t){function n(r,t,n,i){void 0===i&&(i={});try{var a,c=e(t),f=new c(n);if("function"==typeof f.element)a=f.element();else if(f.element instanceof Node)a=f.element;else{if(!(f.$ instanceof Node))throw Error('Sorry, but "'+t+'" is not a widget nor a view!',f);a=f.$}var u=document.getElementById(r);return u&&u.parentNode.replaceChild(a,u),a.setAttribute("id",r),d.addClass(a,i.class||""),o(r,f),f}catch(e){throw console.error("[x-widget] Unable to create widget `"+t+"`!"),console.error("[x-widget] id = ",r,", args = ",n),Error(e)}}function i(e){var r,t=d.tag(e.elem);e.attr&&(d.att(t,e.attr),r=e.attr.id),Array.isArray(e.children)&&e.children.forEach(function(e){d.add(t,e)});var n,i,a={};if(e.prop)for(n in e.prop)i=e.prop[n],Object.defineProperty(a,n,{value:i,writable:!1,configurable:!1,enumerable:!0});return Object.defineProperty(a,"element",{value:t,writable:!1,configurable:!1,enumerable:!0}),void 0!==r&&o(r,a),a}function o(e,r){f[e]=r;var t=u[e];return void 0!==t&&window.setTimeout(function(){t.forEach(function(e){e(r)}),delete u[e]}),"function"==typeof r.element?r.element:r.element||r}var a=function(){function r(){return n(t,arguments)}var t={en:{}},n=e("$").intl;return r.all=t,r}(),d=e("dom"),c=e("tfw.data-binding"),f={},u={},l=function(e,r,t,o){try{return"string"==typeof e?n.call(this,e,r,t,o):i.call(this,e)}catch(e){throw console.error(e),Error("Exception in "+r+"("+JSON.stringify(t)+"):\n"+e)}};l.template=function(r){var t,n,i,a="",d={};for(t in r)n=r[t],"name"==t?a=n:"id"==t?i=n:"$"==t.charAt(0)&&(d[t.substr(1)]=n);var c=e(a),f=new c(d);return i&&o(i,f),"function"==typeof f.element?f.element():f.element||f},l.getById=function(e){if(!f[e])throw Error("[x-widget.getById()] ID not found: "+e+"!");return f[e]},l.onWidgetCreation=function(e,r){void 0===f[e]?void 0===u[e]?u[e]=[r]:u[e].push(r):window.setTimeout(function(){r(f[e])})},l.bind=function(r,t){var n,i,o,a,d,u=f[r];for(n in t)a=t[n].B,Array.isArray(a)&&a.forEach(function(e){if(void 0===(i=f[e[0]]))return void console.error("[x-widget:bind("+r+')] Trying to bind attribute "'+n+'" of widget "'+r+'" to the unexisting widget "'+e[0]+'"!');o=e[1];try{if(2==e.length)c.bind(i,o,u,n);else{var t=e[2];c.bind(i,o,function(){u[n]=t})}}catch(t){console.error("Binding error for widget `"+r+"`!",{ex:t,binding:e})}}),d=t[n].S,Array.isArray(d)&&d.forEach(function(t){var i=APP,o=t;if(Array.isArray(t)){try{i=e(t[0])}catch(e){throw console.error("[x-widget:bind] Widget `"+r+"` can't require unexistent `"+t[0]+"`: ",e),e}o=t[1]}if("function"!=typeof(o=i[o]))throw Array.isArray(t)?Error("[x-widget:bind]  Widget `"+r+"` use unexisting slot `"+t[1]+"` of module `"+t[0]+"`!"):Error("[x-widget:bind]  Widget `"+r+"` use unexisting slot `"+t+"` of main module `APP`!");try{c.bind(u,n,o)}catch(e){console.error("Binding error for widget `"+r+"`!",{ex:e,dstObj:u,dstAtt:n,fct:o,slot:t})}})},r.exports=l,r.exports._=a});
//# sourceMappingURL=x-widget.js.map
